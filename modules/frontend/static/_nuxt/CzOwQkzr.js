import{_ as y}from"./BDl_M9a8.js";import{z as l,b as q,f as v}from"./BtAH9O33.js";import{h as g,m as $,bq as h,j as x,p as F,ag as k,o as n,x as u,w as i,c as d,F as U,L as B,t as E,q as I}from"./Cukv67TD.js";const M={key:2},L=g({__name:"DynamicFields",props:$({fields:{default:()=>[]},disabled:{type:Boolean,default:!1}},{state:{required:!0},stateModifiers:{}}),emits:["update:state"],setup(o){const p=h("formEl"),r=x(o,"state"),c=F(()=>{if(o.fields.length===0)return;const t={};for(const e of o.fields){let s={email:l.string({required_error:`${e.label} is required`}).email("Invalid email"),number:l.number({required_error:`${e.label} is required`}),url:l.string({required_error:`${e.label} is required`}).url({message:`${e.label} must be a valid URL`})}[e.type]||l.string({required_error:`${e.label} is required`});e.min&&(s=s.min(parseFloat(e.min),{message:`${e.label} must be at least ${e.min}`})),e.max&&(s=s.max(parseFloat(e.max),{message:`${e.label} must not exceed ${e.max}`})),t[e.name]=e.required?s.min(1,{message:`${e.label} is required`}):l.optional(s).nullable()}return l.object(t)});function f(){r.value||(r.value={}),o.fields.forEach(t=>{var e;t.default&&!((e=r.value)!=null&&e[t.name])&&(r.value[t.name]=t.type!=="number"?t.default:parseFloat(t.default))})}return k(()=>{f()}),(t,e)=>{const s=y,b=q,_=v;return n(),u(_,{state:r.value,schema:I(c),disabled:t.disabled,ref_key:"formEl",ref:p,class:"space-y-4"},{default:i(()=>[(n(!0),d(U,null,B(t.fields,a=>(n(),u(b,{required:a.required,label:a.label,name:`${a.name}`,help:a.help},{default:i(()=>[["number"].includes(a.type)?(n(),u(s,{key:0,autocomplete:"off",type:"number",min:a.min,max:a.max,value:r.value[a.name],onInput:m=>r.value[a.name]=m.target.value===""?void 0:parseFloat(m.target.value)},null,8,["min","max","value","onInput"])):["url","text","password"].includes(a.type)?(n(),u(s,{key:1,autocomplete:"off",type:a.type,modelValue:r.value[a.name],"onUpdate:modelValue":m=>r.value[a.name]=m},null,8,["type","modelValue","onUpdate:modelValue"])):(n(),d("span",M,E(a.type)+" not supported!",1))]),_:2},1032,["required","label","name","help"]))),256))]),_:1},8,["state","schema","disabled"])}}});export{L as default};
