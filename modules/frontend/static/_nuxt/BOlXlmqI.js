const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./BrnRjBu2.js","./CmCqKDSp.js","./entry.DHJIpuq3.css","./zGrq3pkf.js","./CzVMdW3V.js","./BIDvEq5M.js","./DlAUqK2U.js","./LeftPanel.BiTRC5L7.css","./SamplePanel.BrDgjzHi.css"])))=>i.map(i=>d[i]);
import{e as b,v as x,f as C,g as y,n as u,x as k,o as w,i as P,w as f,j as a,k as $,b as p,l as _,m as h,d as F,s as S,p as U,q as T,r as z}from"./CmCqKDSp.js";import{_ as B,a as R}from"./CjeN7iCs.js";import{u as V,_ as E}from"./BIDvEq5M.js";import{_ as L,u as N}from"./CzVMdW3V.js";import{_ as O}from"./EBrLb2w8.js";import"./zGrq3pkf.js";import"./DoQG-NxU.js";import"./D3nfvcBV.js";import"./CSDh5bKg.js";import"./DY_0w8dX.js";import"./DlAUqK2U.js";import"./Bh00WmJP.js";const j=T(()=>z(()=>import("./BrnRjBu2.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8]),import.meta.url).then(d=>d.default||d)),Y=b({__name:"create",setup(d){const v=V();x(async()=>{var l,c,m;const s=(l=C().query)==null?void 0:l.from;if(!s)return;const{data:e,status:i,error:n}=await y({lazy:!1});if(i.value!=="success"){u().add({color:"error",title:"Unable to fetch processors",description:(c=n.value)==null?void 0:c.message});return}const t=(m=e.value)==null?void 0:m.find(r=>r.id===s);if(!t){u().add({color:"error",title:`Cannot clone processor ${s}`,description:"Processor not found"});return}for(const r in t)r!=="id"&&Object.prototype.hasOwnProperty.call(o,r)&&(o[r]=t[r])});const o=k({source:null,table:null,primary_keys:[],conditions:[],targets:[],index:null,mapping:[]}),g=async()=>{var n;const{status:s,error:e,data:i}=await N("/processors",{method:"post",body:o,watch:!1});if(s.value==="success"){const t=i.value;return u().add({title:"Success",color:"success",description:t.message}),await y().refresh(),S("/processors")}s.value==="error"&&u().add({title:"Error",description:(n=e.value)==null?void 0:n.message,color:"error"})};return(s,e)=>{const i=B,n=E,t=R,l=j,c=U,m=L;return w(),P(m,{as:a(O),state:a(o),onSubmit:$(g,["prevent"]),class:"overflow-y-auto grid grid-rows-[auto_1fr_auto]",ui:a(v).showSamplePanel?{body:"p-0 sm:p-0 grid grid-cols-[1fr_3fr_1.5fr] overflow-y-auto",footer:"p-0 sm:p-0"}:{body:"p-0 sm:p-0 grid grid-cols-[1fr_4.5fr] overflow-y-auto",footer:"p-0 sm:p-0"}},{header:f(()=>[p(i,{title:"Create processor"})]),default:f(()=>[p(n,{form:a(o),"onUpdate:form":e[0]||(e[0]=r=>_(o)?o.value=r:null),class:"overflow-y-auto"},null,8,["form"]),p(t,{form:a(o),"onUpdate:form":e[1]||(e[1]=r=>_(o)?o.value=r:null),class:"overflow-y-auto"},null,8,["form"]),a(v).showSamplePanel?(w(),P(l,{key:0,form:a(o),"onUpdate:form":e[2]||(e[2]=r=>_(o)?o.value=r:null),class:"overflow-y-auto"},null,8,["form"])):h("",!0)]),footer:f(()=>[p(c,{class:"rounded-none",size:"xl",block:"",type:"submit"},{default:f(()=>e[3]||(e[3]=[F(" Create ")])),_:1})]),_:1},8,["as","state","ui"])}}});export{Y as default};
