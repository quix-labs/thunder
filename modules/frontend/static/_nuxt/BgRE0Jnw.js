import{_ as q}from"./fK8DFUjx.js";import{h as d,m as $,bw as h,j as g,p as x,al as F,o as n,x as r,w as p,c as k,F as U,L as V,d as w,t as B,q as D,as as E}from"./CmRwsJZw.js";import{z as m,b as I,h as M}from"./C39p0TxS.js";const L=d({name:"DevOnly",inheritAttrs:!1,setup(u,c){return()=>{var t,i;return(i=(t=c.slots).fallback)==null?void 0:i.call(t)}}}),z=d({__name:"DynamicFields",props:$({fields:{default:()=>[]},disabled:{type:Boolean,default:!1}},{state:{required:!0},stateModifiers:{}}),emits:["update:state"],setup(u){const c=h("formEl"),t=g(u,"state"),i=x(()=>{if(u.fields.length===0)return;const l={};for(const e of u.fields){let s={email:m.string({required_error:`${e.label} is required`}).email("Invalid email"),number:m.number({required_error:`${e.label} is required`}),url:m.string({required_error:`${e.label} is required`}).url({message:`${e.label} must be a valid URL`})}[e.type]||m.string({required_error:`${e.label} is required`});e.min&&(s=s.min(parseFloat(e.min),{message:`${e.label} must be at least ${e.min}`})),e.max&&(s=s.max(parseFloat(e.max),{message:`${e.label} must not exceed ${e.max}`})),l[e.name]=e.required?s.min(1,{message:`${e.label} is required`}):m.optional(s).nullable()}return m.object(l)});function f(){t.value||(t.value={}),u.fields.forEach(l=>{var e;l.default&&!((e=t.value)!=null&&e[l.name])&&(t.value[l.name]=l.type!=="number"?l.default:parseFloat(l.default))})}return F(()=>{f()}),(l,e)=>{const s=q,_=E,b=L,y=I,v=M;return n(),r(v,{state:t.value,schema:D(i),disabled:l.disabled,ref_key:"formEl",ref:c,class:"space-y-4"},{default:p(()=>[(n(!0),k(U,null,V(l.fields,a=>(n(),r(y,{required:a.required,label:a.label,name:`${a.name}`,help:a.help},{default:p(()=>[["number"].includes(a.type)?(n(),r(s,{key:0,class:"w-full",autocomplete:"off",type:"number",min:a.min,max:a.max,value:t.value[a.name],onInput:o=>t.value[a.name]=o.target.value===""?void 0:parseFloat(o.target.value)},null,8,["min","max","value","onInput"])):["url","text","password"].includes(a.type)?(n(),r(s,{key:1,autocomplete:"off",class:"w-full",type:a.type,modelValue:t.value[a.name],"onUpdate:modelValue":o=>t.value[a.name]=o},null,8,["type","modelValue","onUpdate:modelValue"])):a.type==="select"?(n(),r(_,{key:2,autocomplete:"off",class:"w-full",items:a.options,modelValue:t.value[a.name],"onUpdate:modelValue":o=>t.value[a.name]=o},null,8,["items","modelValue","onUpdate:modelValue"])):(n(),r(b,{key:3},{default:p(()=>[w(B(a.type)+" not supported!",1)]),_:2},1024))]),_:2},1032,["required","label","name","help"]))),256))]),_:1},8,["state","schema","disabled"])}}});export{z as default};
