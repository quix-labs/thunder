import{g as y,r as B,o as d,c as i,b as u,w as l,h as s,i as E,a as m,j as D,d as p,F,k as I,l as L,m as N,t as U,p as V,f as b,n as k,_ as M}from"./CcBA2A6A.js";import{_ as O,u as $}from"./B80jb0T7.js";import{u as j,a as H,_ as A}from"./Z1GNhB-J.js";const G=a=>(V("data-v-3d6049c8"),a=a(),b(),a),R={class:"flex gap-x-2 items-center justify-between"},q=G(()=>m("h1",null,"Data Sources",-1)),z={class:"grid grid-cols-3"},J=["innerHTML"],K=y({__name:"data-sources",setup(a){const o=B(!1),{data:w,refresh:f}=j(),{data:_}=H(),T=async v=>{var c;const{data:t,error:r,status:n}=await $(`/sources/${v}`,{method:"DELETE"});if(n.value==="error")k().add({color:"red",title:"Unable to delete source",description:(c=r.value)==null?void 0:c.message});else if(n.value==="success"){const e=t.value;k().add({color:"green",title:"Successfully deleted source",description:e.message})}await f()};return(v,t)=>{const r=L,n=O,c=A;return d(),i("section",null,[u(n,null,{header:l(()=>[m("div",R,[q,u(r,{onClick:t[0]||(t[0]=D(e=>o.value=!s(o),["prevent"])),variant:"soft"},{default:l(()=>[p("+ Add Source")]),_:1})])]),default:l(()=>[m("div",z,[(d(!0),i(F,null,I(s(w)||[],(e,g)=>{var S,h,C,x;return d(),i("div",null,[s(_)&&((h=(S=s(_)[e.driver])==null?void 0:S.config)!=null&&h.image)?(d(),i("span",{key:0,innerHTML:(x=(C=s(_)[e.driver])==null?void 0:C.config)==null?void 0:x.image,class:"nested-svg"},null,8,J)):N("",!0),p(" Source nÂ°"+U(g)+" (TODO user defined name) ",1),u(r,{color:"red",icon:"i-heroicons-trash",onClick:D(P=>T(g),["prevent"])},{default:l(()=>[p(" Delete ")]),_:2},1032,["onClick"])])}),256))])]),_:1}),u(c,{opened:s(o),"onUpdate:opened":t[1]||(t[1]=e=>E(o)?o.value=e:null),onCreated:s(f)},null,8,["opened","onCreated"])])}}}),Y=M(K,[["__scopeId","data-v-3d6049c8"]]);export{Y as default};
