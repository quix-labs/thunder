import{_ as y}from"./CJGHAiC5.js";import{z as n,b as v,f as q}from"./ByDy7e8I.js";import{h as g,m as $,b1 as h,j as x,p as F,ag as k,o as l,x as u,w as i,c as p,F as U,M as E,t as M,q as B}from"./BIfbfnTp.js";const I={key:2},j=g({__name:"DynamicFields",props:$({fields:{default:()=>[]}},{state:{required:!0},stateModifiers:{}}),emits:["update:state"],setup(m){const c=h("formEl"),r=x(m,"state"),d=F(()=>{if(m.fields.length===0)return;const t={};for(const e of m.fields){let s={email:n.string({required_error:`${e.label} is required`}).email("Invalid email"),number:n.number({required_error:`${e.label} is required`}),url:n.string({required_error:`${e.label} is required`}).url({message:`${e.label} must be a valid URL`})}[e.type]||n.string({required_error:`${e.label} is required`});e.min&&(s=s.min(parseFloat(e.min),{message:`${e.label} must be at least ${e.min}`})),e.max&&(s=s.max(parseFloat(e.max),{message:`${e.label} must not exceed ${e.max}`})),t[e.name]=e.required?s.min(1,{message:`${e.label} is required`}):n.optional(s).nullable()}return n.object(t)});function f(){r.value||(r.value={}),m.fields.forEach(t=>{var e;t.default&&!((e=r.value)!=null&&e[t.name])&&(r.value[t.name]=t.type!=="number"?t.default:parseFloat(t.default))})}return k(()=>{f()}),(t,e)=>{const s=y,b=v,_=q;return l(),u(_,{state:r.value,schema:B(d),ref_key:"formEl",ref:c,class:"space-y-4"},{default:i(()=>[(l(!0),p(U,null,E(t.fields,a=>(l(),u(b,{required:a.required,label:a.label,name:`${a.name}`,help:a.help},{default:i(()=>[["number"].includes(a.type)?(l(),u(s,{key:0,autocomplete:"off",type:"number",min:a.min,max:a.max,value:r.value[a.name],onInput:o=>r.value[a.name]=o.target.value===""?void 0:parseFloat(o.target.value)},null,8,["min","max","value","onInput"])):["url","text","password"].includes(a.type)?(l(),u(s,{key:1,autocomplete:"off",type:a.type,modelValue:r.value[a.name],"onUpdate:modelValue":o=>r.value[a.name]=o},null,8,["type","modelValue","onUpdate:modelValue"])):(l(),p("span",I,M(a.type)+" not supported!",1))]),_:2},1032,["required","label","name","help"]))),256))]),_:1},8,["state","schema"])}}});export{j as default};
