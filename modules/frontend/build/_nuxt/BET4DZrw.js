import{_ as v}from"./uN2JylWY.js";import{z as o,_}from"./CJRPV444.js";import{g as h,S as g,R as c,aH as y,o as m,c as p,P as q,H as i,w as x,t as $,F}from"./BV9qboNR.js";const V={key:2},B=h({__name:"DynamicFields",props:g({fields:{default:()=>[]},rootName:{default:"config."}},{modelValue:{default:{}},modelModifiers:{},schema:{required:!1,default:{}},schemaModifiers:{}}),emits:["update:modelValue","update:schema"],setup(u){const r=c(u,"modelValue"),d=c(u,"schema");function f(){if(u.fields.length===0){d.value=void 0;return}const t=u.fields||[],n={};for(const e of t){let l={email:o.string({required_error:`${e.label} is required`}).email("Invalid email"),number:o.number({required_error:`${e.label} is required`}),url:o.string({required_error:`${e.label} is required`}).url({message:`${e.label} must be a valid URL`})}[e.type]||o.string({required_error:`${e.label} is required`});e.min&&(l=l.min(parseFloat(e.min),{message:`${e.label} must be at least ${e.min}`})),e.max&&(l=l.max(parseFloat(e.max),{message:`${e.label} must not exceed ${e.max}`})),n[e.name]=e.required?l.min(1,{message:`${e.label} is required`}):o.optional(l).nullable()}d.value=o.object(n)}function b(){r.value||(r.value={}),u.fields.forEach(t=>{var n;t.default&&!((n=r.value)!=null&&n[t.name])&&(r.value[t.name]=t.type!=="number"?t.default:parseFloat(t.default))})}return y(()=>{f(),b()}),(t,n)=>{const e=v,l=_;return m(!0),p(F,null,q(t.fields,a=>(m(),i(l,{required:a.required,label:a.label,name:`${t.rootName}${a.name}`,help:a.help},{default:x(()=>[["number"].includes(a.type)?(m(),i(e,{key:0,autocomplete:"off",type:"number",min:a.min,max:a.max,value:r.value[a.name],onInput:s=>r.value[a.name]=s.target.value===""?void 0:parseFloat(s.target.value)},null,8,["min","max","value","onInput"])):["url","text","password"].includes(a.type)?(m(),i(e,{key:1,autocomplete:"off",type:a.type,modelValue:r.value[a.name],"onUpdate:modelValue":s=>r.value[a.name]=s},null,8,["type","modelValue","onUpdate:modelValue"])):(m(),p("span",V,$(a.type)+" not supported!",1))]),_:2},1032,["required","label","name","help"]))),256)}}});export{B as default};
