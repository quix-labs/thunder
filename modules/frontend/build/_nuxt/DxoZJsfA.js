import{u as ht,b as Ee,_ as gt,c as He,d as yt}from"./Z1GNhB-J.js";import{s as S,h as N,ar as St,M as le,aF as Le,at as Ot,H as Ae,g as J,r as L,A as Z,am as xt,x as _,ah as K,y as Pe,z as We,B as re,G as ce,O as fe,P as Ke,C as ie,T as Ce,F as se,I as ve,D as Ge,N as me,v as ye,E as Qe,K as ze,J as Q,aG as It,L as B,_ as De,Q as Je,aH as Ct,R as de,aI as Mt,$ as Ye,a0 as Xe,S as Ue,U as Ve,a1 as wt,aa as Rt,ab as Vt,V as kt,W as he,aJ as Tt,aK as _t,ag as $t,a2 as Et,a4 as Ze,o as E,a5 as X,w as F,c as W,a6 as j,m as G,a9 as ge,X as ue,a as q,Y as ke,b as k,t as ee,a8 as At,k as Fe,a7 as Pt,d as oe,ak as Se,ac as zt,aL as Dt,aj as Ie,j as te,i as et,n as je,al as Ft,aM as Bt,aN as Lt,l as Ut,aO as jt,as as Nt}from"./CcBA2A6A.js";import{o as _e,w as tt,f as lt,c as nt,i as qt,O as ot,t as Ne,n as Ht,a as Wt,h as Kt,d as Gt,u as at,_ as Qt}from"./B80jb0T7.js";import{d as it,c as z,f as $e,e as ut,i as Jt,u as st,p as Yt,a as Xt,b as Be,_ as Zt,g as el}from"./n-PNidO-.js";function pe(e,r,n){let a=n.initialDeps??[],t;return()=>{var i,l,o,v;let m;n.key&&((i=n.debug)!=null&&i.call(n))&&(m=Date.now());const c=e();if(!(c.length!==a.length||c.some((M,C)=>a[C]!==M)))return t;a=c;let p;if(n.key&&((l=n.debug)!=null&&l.call(n))&&(p=Date.now()),t=r(...c),n.key&&((o=n.debug)!=null&&o.call(n))){const M=Math.round((Date.now()-m)*100)/100,C=Math.round((Date.now()-p)*100)/100,T=C/16,P=(R,g)=>{for(R=String(R);R.length<g;)R=" "+R;return R};console.info(`%c⏱ ${P(C,5)} /${P(M,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*T,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(v=n==null?void 0:n.onChange)==null||v.call(n,t),t}}function Te(e,r){if(e===void 0)throw new Error("Unexpected undefined");return e}const tl=(e,r)=>Math.abs(e-r)<1,ll=(e,r,n)=>{let a;return function(...t){e.clearTimeout(a),a=e.setTimeout(()=>r.apply(this,t),n)}},nl=e=>e,ol=e=>{const r=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),a=[];for(let t=r;t<=n;t++)a.push(t);return a},al=(e,r)=>{const n=e.scrollElement;if(!n)return;const a=e.targetWindow;if(!a)return;const t=l=>{const{width:o,height:v}=l;r({width:Math.round(o),height:Math.round(v)})};if(t(n.getBoundingClientRect()),!a.ResizeObserver)return()=>{};const i=new a.ResizeObserver(l=>{const o=l[0];if(o!=null&&o.borderBoxSize){const v=o.borderBoxSize[0];if(v){t({width:v.inlineSize,height:v.blockSize});return}}t(n.getBoundingClientRect())});return i.observe(n,{box:"border-box"}),()=>{i.unobserve(n)}},qe={passive:!0},il=typeof window>"u"?!0:"onscrollend"in window,ul=(e,r)=>{const n=e.scrollElement;if(!n)return;const a=e.targetWindow;if(!a)return;let t=0;const i=il?()=>{}:ll(a,()=>{r(t,!1)},e.options.isScrollingResetDelay),l=m=>()=>{const{horizontal:c,isRtl:d}=e.options;t=c?n.scrollLeft*(d&&-1||1):n.scrollTop,i(),r(t,m)},o=l(!0),v=l(!1);return v(),n.addEventListener("scroll",o,qe),n.addEventListener("scrollend",v,qe),()=>{n.removeEventListener("scroll",o),n.removeEventListener("scrollend",v)}},sl=(e,r,n)=>{if(r!=null&&r.borderBoxSize){const a=r.borderBoxSize[0];if(a)return Math.round(a[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},rl=(e,{adjustments:r=0,behavior:n},a)=>{var t,i;const l=e+r;(i=(t=a.scrollElement)==null?void 0:t.scrollTo)==null||i.call(t,{[a.options.horizontal?"left":"top"]:l,behavior:n})};class dl{constructor(r){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const a=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(t=>{t.forEach(i=>{this._measureElement(i.target,i)})}));return{disconnect:()=>{var t;return(t=a())==null?void 0:t.disconnect()},observe:t=>{var i;return(i=a())==null?void 0:i.observe(t,{box:"border-box"})},unobserve:t=>{var i;return(i=a())==null?void 0:i.unobserve(t)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([a,t])=>{typeof t>"u"&&delete n[a]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:nl,rangeExtractor:ol,onChange:()=>{},measureElement:sl,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,...n}},this.notify=n=>{var a,t;(t=(a=this.options).onChange)==null||t.call(a,this,n)},this.maybeNotify=pe(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.observer.disconnect(),this.elementsCache.clear()},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const a=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==a){if(this.cleanup(),!a){this.maybeNotify();return}this.scrollElement=a,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,t=>{this.scrollRect=t,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(t,i)=>{this.scrollAdjustments=0,this.scrollDirection=i?this.getScrollOffset()<t?"forward":"backward":null,this.scrollOffset=t,this.isScrolling=i,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,a)=>{const t=new Map,i=new Map;for(let l=a-1;l>=0;l--){const o=n[l];if(t.has(o.lane))continue;const v=i.get(o.lane);if(v==null||o.end>v.end?i.set(o.lane,o):o.end<v.end&&t.set(o.lane,!0),t.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((l,o)=>l.end===o.end?l.index-o.index:l.end-o.end)[0]:void 0},this.getMeasurementOptions=pe(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,a,t,i,l)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:a,scrollMargin:t,getItemKey:i,enabled:l}),{key:!1}),this.getMeasurements=pe(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:a,scrollMargin:t,getItemKey:i,enabled:l},o)=>{if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const v=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const m=this.measurementsCache.slice(0,v);for(let c=v;c<n;c++){const d=i(c),p=this.options.lanes===1?m[c-1]:this.getFurthestMeasurement(m,c),M=p?p.end+this.options.gap:a+t,C=o.get(d),T=typeof C=="number"?C:this.options.estimateSize(c),P=M+T,R=p?p.lane:c%this.options.lanes;m[c]={index:c,start:M,size:T,end:P,key:d,lane:R}}return this.measurementsCache=m,m},{key:!1,debug:()=>this.options.debug}),this.calculateRange=pe(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(n,a,t)=>this.range=n.length>0&&a>0?cl({measurements:n,outerSize:a,scrollOffset:t}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=pe(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,a,t,i)=>a===null?[]:n({startIndex:a.startIndex,endIndex:a.endIndex,overscan:t,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const a=this.options.indexAttribute,t=n.getAttribute(a);return t?parseInt(t,10):(console.warn(`Missing attribute name '${a}={index}' on measured element.`),-1)},this._measureElement=(n,a)=>{const t=this.indexFromElement(n),i=this.measurementsCache[t];if(!i)return;const l=i.key,o=this.elementsCache.get(l);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(l,n)),n.isConnected&&this.resizeItem(t,this.options.measureElement(n,a,this))},this.resizeItem=(n,a)=>{const t=this.measurementsCache[n];if(!t)return;const i=this.itemSizeCache.get(t.key)??t.size,l=a-i;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(t,l,this):t.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(t.index),this.itemSizeCache=new Map(this.itemSizeCache.set(t.key,a)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((a,t)=>{a.isConnected||(this.observer.unobserve(a),this.elementsCache.delete(t))});return}this._measureElement(n,void 0)},this.getVirtualItems=pe(()=>[this.getIndexes(),this.getMeasurements()],(n,a)=>{const t=[];for(let i=0,l=n.length;i<l;i++){const o=n[i],v=a[o];t.push(v)}return t},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const a=this.getMeasurements();if(a.length!==0)return Te(a[rt(0,a.length-1,t=>Te(a[t]).start,n)])},this.getOffsetForAlignment=(n,a)=>{const t=this.getSize(),i=this.getScrollOffset();a==="auto"&&(n<=i?a="start":n>=i+t?a="end":a="start"),a==="start"?n=n:a==="end"?n=n-t:a==="center"&&(n=n-t/2);const l=this.options.horizontal?"scrollWidth":"scrollHeight",v=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[l]:this.scrollElement[l]:0)-t;return Math.max(Math.min(v,n),0)},this.getOffsetForIndex=(n,a="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const t=this.measurementsCache[n];if(!t)return;const i=this.getSize(),l=this.getScrollOffset();if(a==="auto")if(t.end>=l+i-this.options.scrollPaddingEnd)a="end";else if(t.start<=l+this.options.scrollPaddingStart)a="start";else return[l,a];const o=a==="end"?t.end+this.options.scrollPaddingEnd:t.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,a),a]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:a="start",behavior:t}={})=>{this.cancelScrollToIndex(),t==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,a),{adjustments:void 0,behavior:t})},this.scrollToIndex=(n,{align:a="auto",behavior:t}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),t==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const i=this.getOffsetForIndex(n,a);if(!i)return;const[l,o]=i;this._scrollToOffset(l,{adjustments:void 0,behavior:t}),t!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(n))){const[m]=Te(this.getOffsetForIndex(n,o));tl(m,this.getScrollOffset())||this.scrollToIndex(n,{align:o,behavior:t})}else this.scrollToIndex(n,{align:o,behavior:t})}))},this.scrollBy=(n,{behavior:a}={})=>{this.cancelScrollToIndex(),a==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:a})},this.getTotalSize=()=>{var n;const a=this.getMeasurements();let t;return a.length===0?t=this.options.paddingStart:t=this.options.lanes===1?((n=a[a.length-1])==null?void 0:n.end)??0:Math.max(...a.slice(-this.options.lanes).map(i=>i.end)),t-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(n,{adjustments:a,behavior:t})=>{this.options.scrollToFn(n,{behavior:t,adjustments:a},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(r)}}const rt=(e,r,n,a)=>{for(;e<=r;){const t=(e+r)/2|0,i=n(t);if(i<a)e=t+1;else if(i>a)r=t-1;else return t}return e>0?e-1:0};function cl({measurements:e,outerSize:r,scrollOffset:n}){const a=e.length-1,i=rt(0,a,o=>e[o].start,n);let l=i;for(;l<a&&e[l].end<n+r;)l++;return{startIndex:i,endIndex:l}}function vl(e){const r=new dl(N(e)),n=St(r),a=r._didMount();return le(()=>N(e).getScrollElement(),t=>{t&&r._willUpdate()},{immediate:!0}),le(()=>N(e),t=>{r.setOptions({...t,onChange:(i,l)=>{var o;Le(n),(o=t.onChange)==null||o.call(t,i,l)}}),r._willUpdate(),Le(n)},{immediate:!0}),Ot(a),n}function pl(e){return vl(S(()=>({observeElementRect:al,observeElementOffset:ul,scrollToFn:rl,...N(e)})))}function fl(){let e=_e();return Ae(()=>e.dispose()),e}function ml(){let e=fl();return r=>{e.dispose(),e.nextFrame(r)}}var dt=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(dt||{}),bl={};function hl(e,r){return e===r}var gl=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(gl||{}),yl=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(yl||{}),Sl=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(Sl||{});let ct=Symbol("ComboboxContext");function be(e){let r=ze(ct,null);if(r===null){let n=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,be),n}return r}let vt=Symbol("VirtualContext"),Ol=J({name:"VirtualProvider",setup(e,{slots:r}){let n=be("VirtualProvider"),a=S(()=>{let o=_(n.optionsRef);if(!o)return{start:0,end:0};let v=window.getComputedStyle(o);return{start:parseFloat(v.paddingBlockStart||v.paddingTop),end:parseFloat(v.paddingBlockEnd||v.paddingBottom)}}),t=pl(S(()=>({scrollPaddingStart:a.value.start,scrollPaddingEnd:a.value.end,count:n.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return _(n.optionsRef)},overscan:12}))),i=S(()=>{var o;return(o=n.virtual.value)==null?void 0:o.options}),l=L(0);return le([i],()=>{l.value+=1}),Pe(vt,n.virtual.value?t:null),()=>[fe("div",{style:{position:"relative",width:"100%",height:`${t.value.getTotalSize()}px`},ref:o=>{if(o){if(typeof process<"u"&&bl.JEST_WORKER_ID!==void 0||n.activationTrigger.value===0)return;n.activeOptionIndex.value!==null&&n.virtual.value.options.length>n.activeOptionIndex.value&&t.value.scrollToIndex(n.activeOptionIndex.value)}}},t.value.getVirtualItems().map(o=>It(r.default({option:n.virtual.value.options[o.index],open:n.comboboxState.value===0})[0],{key:`${l.value}-${o.index}`,"data-index":o.index,"aria-setsize":n.virtual.value.options.length,"aria-posinset":o.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${o.start}px)`,overflowAnchor:"none"}})))]}}),xl=J({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:r,attrs:n,emit:a}){let t=L(1),i=L(null),l=L(null),o=L(null),v=L(null),m=L({static:!1,hold:!1}),c=L([]),d=L(null),p=L(2),M=L(!1);function C(f=O=>O){let O=d.value!==null?c.value[d.value]:null,V=f(c.value.slice()),$=V.length>0&&V[0].dataRef.order.value!==null?V.sort((U,w)=>U.dataRef.order.value-w.dataRef.order.value):ot(V,U=>_(U.dataRef.domRef)),h=O?$.indexOf(O):null;return h===-1&&(h=null),{options:$,activeOptionIndex:h}}let T=S(()=>e.multiple?1:0),P=S(()=>e.nullable),[R,g]=it(S(()=>e.modelValue),f=>a("update:modelValue",f),S(()=>e.defaultValue)),u=S(()=>R.value===void 0?Z(T.value,{1:[],0:void 0}):R.value),y=null,s=null;function x(f){return Z(T.value,{0(){return g==null?void 0:g(f)},1:()=>{let O=K(b.value.value).slice(),V=K(f),$=O.findIndex(h=>b.compare(V,K(h)));return $===-1?O.push(V):O.splice($,1),g==null?void 0:g(O)}})}let I=S(()=>{});le([I],([f],[O])=>{if(b.virtual.value&&f&&O&&d.value!==null){let V=f.indexOf(O[d.value]);V!==-1?d.value=V:d.value=null}});let b={comboboxState:t,value:u,mode:T,compare(f,O){if(typeof e.by=="string"){let V=e.by;return(f==null?void 0:f[V])===(O==null?void 0:O[V])}return e.by===null?hl(f,O):e.by(f,O)},calculateIndex(f){return b.virtual.value?e.by===null?b.virtual.value.options.indexOf(f):b.virtual.value.options.findIndex(O=>b.compare(O,f)):c.value.findIndex(O=>b.compare(O.dataRef.value,f))},defaultValue:S(()=>e.defaultValue),nullable:P,immediate:S(()=>!1),virtual:S(()=>null),inputRef:l,labelRef:i,buttonRef:o,optionsRef:v,disabled:S(()=>e.disabled),options:c,change(f){g(f)},activeOptionIndex:S(()=>{if(M.value&&d.value===null&&(b.virtual.value?b.virtual.value.options.length>0:c.value.length>0)){if(b.virtual.value){let O=b.virtual.value.options.findIndex(V=>{var $;return!(($=b.virtual.value)!=null&&$.disabled(V))});if(O!==-1)return O}let f=c.value.findIndex(O=>!O.dataRef.disabled);if(f!==-1)return f}return d.value}),activationTrigger:p,optionsPropsRef:m,closeCombobox(){M.value=!1,!e.disabled&&t.value!==1&&(t.value=1,d.value=null)},openCombobox(){if(M.value=!0,!e.disabled&&t.value!==0){if(b.value.value){let f=b.calculateIndex(b.value.value);f!==-1&&(d.value=f)}t.value=0}},setActivationTrigger(f){p.value=f},goToOption(f,O,V){M.value=!1,y!==null&&cancelAnimationFrame(y),y=requestAnimationFrame(()=>{if(e.disabled||v.value&&!m.value.static&&t.value===1)return;if(b.virtual.value){d.value=f===z.Specific?O:$e({focus:f},{resolveItems:()=>b.virtual.value.options,resolveActiveIndex:()=>{var U,w;return(w=(U=b.activeOptionIndex.value)!=null?U:b.virtual.value.options.findIndex(H=>{var Y;return!((Y=b.virtual.value)!=null&&Y.disabled(H))}))!=null?w:null},resolveDisabled:U=>b.virtual.value.disabled(U),resolveId(){throw new Error("Function not implemented.")}}),p.value=V??2;return}let $=C();if($.activeOptionIndex===null){let U=$.options.findIndex(w=>!w.dataRef.disabled);U!==-1&&($.activeOptionIndex=U)}let h=f===z.Specific?O:$e({focus:f},{resolveItems:()=>$.options,resolveActiveIndex:()=>$.activeOptionIndex,resolveId:U=>U.id,resolveDisabled:U=>U.dataRef.disabled});d.value=h,p.value=V??2,c.value=$.options})},selectOption(f){let O=c.value.find($=>$.id===f);if(!O)return;let{dataRef:V}=O;x(V.value)},selectActiveOption(){if(b.activeOptionIndex.value!==null){if(b.virtual.value)x(b.virtual.value.options[b.activeOptionIndex.value]);else{let{dataRef:f}=c.value[b.activeOptionIndex.value];x(f.value)}b.goToOption(z.Specific,b.activeOptionIndex.value)}},registerOption(f,O){let V=xt({id:f,dataRef:O});if(b.virtual.value){c.value.push(V);return}s&&cancelAnimationFrame(s);let $=C(h=>(h.push(V),h));d.value===null&&b.isSelected(O.value.value)&&($.activeOptionIndex=$.options.indexOf(V)),c.value=$.options,d.value=$.activeOptionIndex,p.value=2,$.options.some(h=>!_(h.dataRef.domRef))&&(s=requestAnimationFrame(()=>{let h=C();c.value=h.options,d.value=h.activeOptionIndex}))},unregisterOption(f,O){if(y!==null&&cancelAnimationFrame(y),O&&(M.value=!0),b.virtual.value){c.value=c.value.filter($=>$.id!==f);return}let V=C($=>{let h=$.findIndex(U=>U.id===f);return h!==-1&&$.splice(h,1),$});c.value=V.options,d.value=V.activeOptionIndex,p.value=2},isSelected(f){return Z(T.value,{0:()=>b.compare(K(b.value.value),K(f)),1:()=>K(b.value.value).some(O=>b.compare(K(O),K(f)))})},isActive(f){return d.value===b.calculateIndex(f)}};tt([l,o,v],()=>b.closeCombobox(),S(()=>t.value===0)),Pe(ct,b),We(S(()=>Z(t.value,{0:re.Open,1:re.Closed})));let A=S(()=>{var f;return(f=_(l))==null?void 0:f.closest("form")});return ce(()=>{le([A],()=>{if(!A.value||e.defaultValue===void 0)return;function f(){b.change(e.defaultValue)}return A.value.addEventListener("reset",f),()=>{var O;(O=A.value)==null||O.removeEventListener("reset",f)}},{immediate:!0})}),()=>{var f,O,V;let{name:$,disabled:h,form:U,...w}=e,H={open:t.value===0,disabled:h,activeIndex:b.activeOptionIndex.value,activeOption:b.activeOptionIndex.value===null?null:b.virtual.value?b.virtual.value.options[(f=b.activeOptionIndex.value)!=null?f:0]:(V=(O=b.options.value[b.activeOptionIndex.value])==null?void 0:O.dataRef.value)!=null?V:null,value:u.value};return fe(se,[...$!=null&&u.value!=null?ut({[$]:u.value}).map(([Y,we])=>fe(lt,Ke({features:nt.Hidden,key:Y,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:U,disabled:h,name:Y,value:we}))):[],ie({theirProps:{...n,...Ce(w,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:H,slots:r,attrs:n,name:"Combobox"})])}}}),Il=J({name:"ComboboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:r,slots:n,expose:a}){var t;let i=(t=e.id)!=null?t:`headlessui-combobox-button-${ve()}`,l=be("ComboboxButton");a({el:l.buttonRef,$el:l.buttonRef});function o(c){l.disabled.value||(l.comboboxState.value===0?l.closeCombobox():(c.preventDefault(),l.openCombobox()),Q(()=>{var d;return(d=_(l.inputRef))==null?void 0:d.focus({preventScroll:!0})}))}function v(c){switch(c.key){case B.ArrowDown:c.preventDefault(),c.stopPropagation(),l.comboboxState.value===1&&l.openCombobox(),Q(()=>{var d;return(d=l.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return;case B.ArrowUp:c.preventDefault(),c.stopPropagation(),l.comboboxState.value===1&&(l.openCombobox(),Q(()=>{l.value.value||l.goToOption(z.Last)})),Q(()=>{var d;return(d=l.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return;case B.Escape:if(l.comboboxState.value!==0)return;c.preventDefault(),l.optionsRef.value&&!l.optionsPropsRef.value.static&&c.stopPropagation(),l.closeCombobox(),Q(()=>{var d;return(d=l.inputRef.value)==null?void 0:d.focus({preventScroll:!0})});return}}let m=Ge(S(()=>({as:e.as,type:r.type})),l.buttonRef);return()=>{var c,d;let p={open:l.comboboxState.value===0,disabled:l.disabled.value,value:l.value.value},{...M}=e,C={ref:l.buttonRef,id:i,type:m.value,tabindex:"-1","aria-haspopup":"listbox","aria-controls":(c=_(l.optionsRef))==null?void 0:c.id,"aria-expanded":l.comboboxState.value===0,"aria-labelledby":l.labelRef.value?[(d=_(l.labelRef))==null?void 0:d.id,i].join(" "):void 0,disabled:l.disabled.value===!0?!0:void 0,onKeydown:v,onClick:o};return ie({ourProps:C,theirProps:M,slot:p,attrs:r,slots:n,name:"ComboboxButton"})}}}),Cl=J({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:e=>!0},setup(e,{emit:r,attrs:n,slots:a,expose:t}){var i;let l=(i=e.id)!=null?i:`headlessui-combobox-input-${ve()}`,o=be("ComboboxInput"),v=S(()=>qt(_(o.inputRef))),m={value:!1};t({el:o.inputRef,$el:o.inputRef});function c(){o.change(null);let s=_(o.optionsRef);s&&(s.scrollTop=0),o.goToOption(z.Nothing)}let d=S(()=>{var s;let x=o.value.value;return _(o.inputRef)?typeof e.displayValue<"u"&&x!==void 0?(s=e.displayValue(x))!=null?s:"":typeof x=="string"?x:"":""});ce(()=>{le([d,o.comboboxState,v],([s,x],[I,b])=>{if(m.value)return;let A=_(o.inputRef);A&&((b===0&&x===1||s!==I)&&(A.value=s),requestAnimationFrame(()=>{var f;if(m.value||!A||((f=v.value)==null?void 0:f.activeElement)!==A)return;let{selectionStart:O,selectionEnd:V}=A;Math.abs((V??0)-(O??0))===0&&O===0&&A.setSelectionRange(A.value.length,A.value.length)}))},{immediate:!0}),le([o.comboboxState],([s],[x])=>{if(s===0&&x===1){if(m.value)return;let I=_(o.inputRef);if(!I)return;let b=I.value,{selectionStart:A,selectionEnd:f,selectionDirection:O}=I;I.value="",I.value=b,O!==null?I.setSelectionRange(A,f,O):I.setSelectionRange(A,f)}})});let p=L(!1);function M(){p.value=!0}function C(){_e().nextFrame(()=>{p.value=!1})}let T=ml();function P(s){switch(m.value=!0,T(()=>{m.value=!1}),s.key){case B.Enter:if(m.value=!1,o.comboboxState.value!==0||p.value)return;if(s.preventDefault(),s.stopPropagation(),o.activeOptionIndex.value===null){o.closeCombobox();return}o.selectActiveOption(),o.mode.value===0&&o.closeCombobox();break;case B.ArrowDown:return m.value=!1,s.preventDefault(),s.stopPropagation(),Z(o.comboboxState.value,{0:()=>o.goToOption(z.Next),1:()=>o.openCombobox()});case B.ArrowUp:return m.value=!1,s.preventDefault(),s.stopPropagation(),Z(o.comboboxState.value,{0:()=>o.goToOption(z.Previous),1:()=>{o.openCombobox(),Q(()=>{o.value.value||o.goToOption(z.Last)})}});case B.Home:if(s.shiftKey)break;return m.value=!1,s.preventDefault(),s.stopPropagation(),o.goToOption(z.First);case B.PageUp:return m.value=!1,s.preventDefault(),s.stopPropagation(),o.goToOption(z.First);case B.End:if(s.shiftKey)break;return m.value=!1,s.preventDefault(),s.stopPropagation(),o.goToOption(z.Last);case B.PageDown:return m.value=!1,s.preventDefault(),s.stopPropagation(),o.goToOption(z.Last);case B.Escape:if(m.value=!1,o.comboboxState.value!==0)return;s.preventDefault(),o.optionsRef.value&&!o.optionsPropsRef.value.static&&s.stopPropagation(),o.nullable.value&&o.mode.value===0&&o.value.value===null&&c(),o.closeCombobox();break;case B.Tab:if(m.value=!1,o.comboboxState.value!==0)return;o.mode.value===0&&o.activationTrigger.value!==1&&o.selectActiveOption(),o.closeCombobox();break}}function R(s){r("change",s),o.nullable.value&&o.mode.value===0&&s.target.value===""&&c(),o.openCombobox()}function g(s){var x,I,b;let A=(x=s.relatedTarget)!=null?x:Ne.find(f=>f!==s.currentTarget);if(m.value=!1,!((I=_(o.optionsRef))!=null&&I.contains(A))&&!((b=_(o.buttonRef))!=null&&b.contains(A))&&o.comboboxState.value===0)return s.preventDefault(),o.mode.value===0&&(o.nullable.value&&o.value.value===null?c():o.activationTrigger.value!==1&&o.selectActiveOption()),o.closeCombobox()}function u(s){var x,I,b;let A=(x=s.relatedTarget)!=null?x:Ne.find(f=>f!==s.currentTarget);(I=_(o.buttonRef))!=null&&I.contains(A)||(b=_(o.optionsRef))!=null&&b.contains(A)||o.disabled.value||o.immediate.value&&o.comboboxState.value!==0&&(o.openCombobox(),_e().nextFrame(()=>{o.setActivationTrigger(1)}))}let y=S(()=>{var s,x,I,b;return(b=(I=(x=e.defaultValue)!=null?x:o.defaultValue.value!==void 0?(s=e.displayValue)==null?void 0:s.call(e,o.defaultValue.value):null)!=null?I:o.defaultValue.value)!=null?b:""});return()=>{var s,x,I,b,A,f,O;let V={open:o.comboboxState.value===0},{displayValue:$,onChange:h,...U}=e,w={"aria-controls":(s=o.optionsRef.value)==null?void 0:s.id,"aria-expanded":o.comboboxState.value===0,"aria-activedescendant":o.activeOptionIndex.value===null?void 0:o.virtual.value?(x=o.options.value.find(H=>!o.virtual.value.disabled(H.dataRef.value)&&o.compare(H.dataRef.value,o.virtual.value.options[o.activeOptionIndex.value])))==null?void 0:x.id:(I=o.options.value[o.activeOptionIndex.value])==null?void 0:I.id,"aria-labelledby":(f=(b=_(o.labelRef))==null?void 0:b.id)!=null?f:(A=_(o.buttonRef))==null?void 0:A.id,"aria-autocomplete":"list",id:l,onCompositionstart:M,onCompositionend:C,onKeydown:P,onInput:R,onFocus:u,onBlur:g,role:"combobox",type:(O=n.type)!=null?O:"text",tabIndex:0,ref:o.inputRef,defaultValue:y.value,disabled:o.disabled.value===!0?!0:void 0};return ie({ourProps:w,theirProps:U,slot:V,attrs:n,slots:a,features:me.RenderStrategy|me.Static,name:"ComboboxInput"})}}}),Ml=J({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:r,slots:n,expose:a}){let t=be("ComboboxOptions"),i=`headlessui-combobox-options-${ve()}`;a({el:t.optionsRef,$el:t.optionsRef}),ye(()=>{t.optionsPropsRef.value.static=e.static}),ye(()=>{t.optionsPropsRef.value.hold=e.hold});let l=Qe(),o=S(()=>l!==null?(l.value&re.Open)===re.Open:t.comboboxState.value===0);Jt({container:S(()=>_(t.optionsRef)),enabled:S(()=>t.comboboxState.value===0),accept(m){return m.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:m.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(m){m.setAttribute("role","none")}});function v(m){m.preventDefault()}return()=>{var m,c,d;let p={open:t.comboboxState.value===0},M={"aria-labelledby":(d=(m=_(t.labelRef))==null?void 0:m.id)!=null?d:(c=_(t.buttonRef))==null?void 0:c.id,id:i,ref:t.optionsRef,role:"listbox","aria-multiselectable":t.mode.value===1?!0:void 0,onMousedown:v},C=Ce(e,["hold"]);return ie({ourProps:M,theirProps:C,slot:p,attrs:r,slots:t.virtual.value&&t.comboboxState.value===0?{...n,default:()=>[fe(Ol,{},n.default)]}:n,features:me.RenderStrategy|me.Static,visible:o.value,name:"ComboboxOptions"})}}}),wl=J({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:r,attrs:n,expose:a}){let t=be("ComboboxOption"),i=`headlessui-combobox-option-${ve()}`,l=L(null),o=S(()=>e.disabled);a({el:l,$el:l});let v=S(()=>{var g;return t.virtual.value?t.activeOptionIndex.value===t.calculateIndex(e.value):t.activeOptionIndex.value===null?!1:((g=t.options.value[t.activeOptionIndex.value])==null?void 0:g.id)===i}),m=S(()=>t.isSelected(e.value)),c=ze(vt,null),d=S(()=>({disabled:e.disabled,value:e.value,domRef:l,order:S(()=>e.order)}));ce(()=>t.registerOption(i,d)),Ae(()=>t.unregisterOption(i,v.value)),ye(()=>{let g=_(l);g&&(c==null||c.value.measureElement(g))}),ye(()=>{t.comboboxState.value===0&&v.value&&(t.virtual.value||t.activationTrigger.value!==0&&Q(()=>{var g,u;return(u=(g=_(l))==null?void 0:g.scrollIntoView)==null?void 0:u.call(g,{block:"nearest"})}))});function p(g){g.preventDefault(),g.button===dt.Left&&(o.value||(t.selectOption(i),Ht()||requestAnimationFrame(()=>{var u;return(u=_(t.inputRef))==null?void 0:u.focus({preventScroll:!0})}),t.mode.value===0&&t.closeCombobox()))}function M(){var g;if(e.disabled||(g=t.virtual.value)!=null&&g.disabled(e.value))return t.goToOption(z.Nothing);let u=t.calculateIndex(e.value);t.goToOption(z.Specific,u)}let C=st();function T(g){C.update(g)}function P(g){var u;if(!C.wasMoved(g)||e.disabled||(u=t.virtual.value)!=null&&u.disabled(e.value)||v.value)return;let y=t.calculateIndex(e.value);t.goToOption(z.Specific,y,0)}function R(g){var u;C.wasMoved(g)&&(e.disabled||(u=t.virtual.value)!=null&&u.disabled(e.value)||v.value&&(t.optionsPropsRef.value.hold||t.goToOption(z.Nothing)))}return()=>{let{disabled:g}=e,u={active:v.value,selected:m.value,disabled:g},y={id:i,ref:l,role:"option",tabIndex:g===!0?void 0:-1,"aria-disabled":g===!0?!0:void 0,"aria-selected":m.value,disabled:void 0,onMousedown:p,onFocus:M,onPointerenter:T,onMouseenter:T,onPointermove:P,onMousemove:P,onPointerleave:R,onMouseleave:R},s=Ce(e,["order","value"]);return ie({ourProps:y,theirProps:s,slot:u,attrs:n,slots:r,name:"ComboboxOption"})}}});function Rl(e,r){return e===r}var Vl=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Vl||{}),kl=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(kl||{}),Tl=(e=>(e[e.Pointer=0]="Pointer",e[e.Other=1]="Other",e))(Tl||{});function _l(e){requestAnimationFrame(()=>requestAnimationFrame(e))}let pt=Symbol("ListboxContext");function Me(e){let r=ze(pt,null);if(r===null){let n=new Error(`<${e} /> is missing a parent <Listbox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Me),n}return r}let $l=J({name:"Listbox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],default:()=>Rl},horizontal:{type:[Boolean],default:!1},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},multiple:{type:[Boolean],default:!1}},inheritAttrs:!1,setup(e,{slots:r,attrs:n,emit:a}){let t=L(1),i=L(null),l=L(null),o=L(null),v=L([]),m=L(""),c=L(null),d=L(1);function p(u=y=>y){let y=c.value!==null?v.value[c.value]:null,s=ot(u(v.value.slice()),I=>_(I.dataRef.domRef)),x=y?s.indexOf(y):null;return x===-1&&(x=null),{options:s,activeOptionIndex:x}}let M=S(()=>e.multiple?1:0),[C,T]=it(S(()=>e.modelValue),u=>a("update:modelValue",u),S(()=>e.defaultValue)),P=S(()=>C.value===void 0?Z(M.value,{1:[],0:void 0}):C.value),R={listboxState:t,value:P,mode:M,compare(u,y){if(typeof e.by=="string"){let s=e.by;return(u==null?void 0:u[s])===(y==null?void 0:y[s])}return e.by(u,y)},orientation:S(()=>e.horizontal?"horizontal":"vertical"),labelRef:i,buttonRef:l,optionsRef:o,disabled:S(()=>e.disabled),options:v,searchQuery:m,activeOptionIndex:c,activationTrigger:d,closeListbox(){e.disabled||t.value!==1&&(t.value=1,c.value=null)},openListbox(){e.disabled||t.value!==0&&(t.value=0)},goToOption(u,y,s){if(e.disabled||t.value===1)return;let x=p(),I=$e(u===z.Specific?{focus:z.Specific,id:y}:{focus:u},{resolveItems:()=>x.options,resolveActiveIndex:()=>x.activeOptionIndex,resolveId:b=>b.id,resolveDisabled:b=>b.dataRef.disabled});m.value="",c.value=I,d.value=s??1,v.value=x.options},search(u){if(e.disabled||t.value===1)return;let y=m.value!==""?0:1;m.value+=u.toLowerCase();let s=(c.value!==null?v.value.slice(c.value+y).concat(v.value.slice(0,c.value+y)):v.value).find(I=>I.dataRef.textValue.startsWith(m.value)&&!I.dataRef.disabled),x=s?v.value.indexOf(s):-1;x===-1||x===c.value||(c.value=x,d.value=1)},clearSearch(){e.disabled||t.value!==1&&m.value!==""&&(m.value="")},registerOption(u,y){let s=p(x=>[...x,{id:u,dataRef:y}]);v.value=s.options,c.value=s.activeOptionIndex},unregisterOption(u){let y=p(s=>{let x=s.findIndex(I=>I.id===u);return x!==-1&&s.splice(x,1),s});v.value=y.options,c.value=y.activeOptionIndex,d.value=1},theirOnChange(u){e.disabled||T(u)},select(u){e.disabled||T(Z(M.value,{0:()=>u,1:()=>{let y=K(R.value.value).slice(),s=K(u),x=y.findIndex(I=>R.compare(s,K(I)));return x===-1?y.push(s):y.splice(x,1),y}}))}};tt([l,o],(u,y)=>{var s;R.closeListbox(),Wt(y,Kt.Loose)||(u.preventDefault(),(s=_(l))==null||s.focus())},S(()=>t.value===0)),Pe(pt,R),We(S(()=>Z(t.value,{0:re.Open,1:re.Closed})));let g=S(()=>{var u;return(u=_(l))==null?void 0:u.closest("form")});return ce(()=>{le([g],()=>{if(!g.value||e.defaultValue===void 0)return;function u(){R.theirOnChange(e.defaultValue)}return g.value.addEventListener("reset",u),()=>{var y;(y=g.value)==null||y.removeEventListener("reset",u)}},{immediate:!0})}),()=>{let{name:u,modelValue:y,disabled:s,form:x,...I}=e,b={open:t.value===0,disabled:s,value:P.value};return fe(se,[...u!=null&&P.value!=null?ut({[u]:P.value}).map(([A,f])=>fe(lt,Ke({features:nt.Hidden,key:A,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:x,disabled:s,name:A,value:f}))):[],ie({ourProps:{},theirProps:{...n,...Ce(I,["defaultValue","onUpdate:modelValue","horizontal","multiple","by"])},slot:b,slots:r,attrs:n,name:"Listbox"})])}}}),El=J({name:"ListboxButton",props:{as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(e,{attrs:r,slots:n,expose:a}){var t;let i=(t=e.id)!=null?t:`headlessui-listbox-button-${ve()}`,l=Me("ListboxButton");a({el:l.buttonRef,$el:l.buttonRef});function o(d){switch(d.key){case B.Space:case B.Enter:case B.ArrowDown:d.preventDefault(),l.openListbox(),Q(()=>{var p;(p=_(l.optionsRef))==null||p.focus({preventScroll:!0}),l.value.value||l.goToOption(z.First)});break;case B.ArrowUp:d.preventDefault(),l.openListbox(),Q(()=>{var p;(p=_(l.optionsRef))==null||p.focus({preventScroll:!0}),l.value.value||l.goToOption(z.Last)});break}}function v(d){switch(d.key){case B.Space:d.preventDefault();break}}function m(d){l.disabled.value||(l.listboxState.value===0?(l.closeListbox(),Q(()=>{var p;return(p=_(l.buttonRef))==null?void 0:p.focus({preventScroll:!0})})):(d.preventDefault(),l.openListbox(),_l(()=>{var p;return(p=_(l.optionsRef))==null?void 0:p.focus({preventScroll:!0})})))}let c=Ge(S(()=>({as:e.as,type:r.type})),l.buttonRef);return()=>{var d,p;let M={open:l.listboxState.value===0,disabled:l.disabled.value,value:l.value.value},{...C}=e,T={ref:l.buttonRef,id:i,type:c.value,"aria-haspopup":"listbox","aria-controls":(d=_(l.optionsRef))==null?void 0:d.id,"aria-expanded":l.listboxState.value===0,"aria-labelledby":l.labelRef.value?[(p=_(l.labelRef))==null?void 0:p.id,i].join(" "):void 0,disabled:l.disabled.value===!0?!0:void 0,onKeydown:o,onKeyup:v,onClick:m};return ie({ourProps:T,theirProps:C,slot:M,attrs:r,slots:n,name:"ListboxButton"})}}}),Al=J({name:"ListboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(e,{attrs:r,slots:n,expose:a}){var t;let i=(t=e.id)!=null?t:`headlessui-listbox-options-${ve()}`,l=Me("ListboxOptions"),o=L(null);a({el:l.optionsRef,$el:l.optionsRef});function v(d){switch(o.value&&clearTimeout(o.value),d.key){case B.Space:if(l.searchQuery.value!=="")return d.preventDefault(),d.stopPropagation(),l.search(d.key);case B.Enter:if(d.preventDefault(),d.stopPropagation(),l.activeOptionIndex.value!==null){let p=l.options.value[l.activeOptionIndex.value];l.select(p.dataRef.value)}l.mode.value===0&&(l.closeListbox(),Q(()=>{var p;return(p=_(l.buttonRef))==null?void 0:p.focus({preventScroll:!0})}));break;case Z(l.orientation.value,{vertical:B.ArrowDown,horizontal:B.ArrowRight}):return d.preventDefault(),d.stopPropagation(),l.goToOption(z.Next);case Z(l.orientation.value,{vertical:B.ArrowUp,horizontal:B.ArrowLeft}):return d.preventDefault(),d.stopPropagation(),l.goToOption(z.Previous);case B.Home:case B.PageUp:return d.preventDefault(),d.stopPropagation(),l.goToOption(z.First);case B.End:case B.PageDown:return d.preventDefault(),d.stopPropagation(),l.goToOption(z.Last);case B.Escape:d.preventDefault(),d.stopPropagation(),l.closeListbox(),Q(()=>{var p;return(p=_(l.buttonRef))==null?void 0:p.focus({preventScroll:!0})});break;case B.Tab:d.preventDefault(),d.stopPropagation();break;default:d.key.length===1&&(l.search(d.key),o.value=setTimeout(()=>l.clearSearch(),350));break}}let m=Qe(),c=S(()=>m!==null?(m.value&re.Open)===re.Open:l.listboxState.value===0);return()=>{var d,p;let M={open:l.listboxState.value===0},{...C}=e,T={"aria-activedescendant":l.activeOptionIndex.value===null||(d=l.options.value[l.activeOptionIndex.value])==null?void 0:d.id,"aria-multiselectable":l.mode.value===1?!0:void 0,"aria-labelledby":(p=_(l.buttonRef))==null?void 0:p.id,"aria-orientation":l.orientation.value,id:i,onKeydown:v,role:"listbox",tabIndex:0,ref:l.optionsRef};return ie({ourProps:T,theirProps:C,slot:M,attrs:r,slots:n,features:me.RenderStrategy|me.Static,visible:c.value,name:"ListboxOptions"})}}}),Pl=J({name:"ListboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(e,{slots:r,attrs:n,expose:a}){var t;let i=(t=e.id)!=null?t:`headlessui-listbox-option-${ve()}`,l=Me("ListboxOption"),o=L(null);a({el:o,$el:o});let v=S(()=>l.activeOptionIndex.value!==null?l.options.value[l.activeOptionIndex.value].id===i:!1),m=S(()=>Z(l.mode.value,{0:()=>l.compare(K(l.value.value),K(e.value)),1:()=>K(l.value.value).some(u=>l.compare(K(u),K(e.value)))})),c=S(()=>Z(l.mode.value,{1:()=>{var u;let y=K(l.value.value);return((u=l.options.value.find(s=>y.some(x=>l.compare(K(x),K(s.dataRef.value)))))==null?void 0:u.id)===i},0:()=>m.value})),d=Yt(o),p=S(()=>({disabled:e.disabled,value:e.value,get textValue(){return d()},domRef:o}));ce(()=>l.registerOption(i,p)),Ae(()=>l.unregisterOption(i)),ce(()=>{le([l.listboxState,m],()=>{l.listboxState.value===0&&m.value&&Z(l.mode.value,{1:()=>{c.value&&l.goToOption(z.Specific,i)},0:()=>{l.goToOption(z.Specific,i)}})},{immediate:!0})}),ye(()=>{l.listboxState.value===0&&v.value&&l.activationTrigger.value!==0&&Q(()=>{var u,y;return(y=(u=_(o))==null?void 0:u.scrollIntoView)==null?void 0:y.call(u,{block:"nearest"})})});function M(u){if(e.disabled)return u.preventDefault();l.select(e.value),l.mode.value===0&&(l.closeListbox(),Q(()=>{var y;return(y=_(l.buttonRef))==null?void 0:y.focus({preventScroll:!0})}))}function C(){if(e.disabled)return l.goToOption(z.Nothing);l.goToOption(z.Specific,i)}let T=st();function P(u){T.update(u)}function R(u){T.wasMoved(u)&&(e.disabled||v.value||l.goToOption(z.Specific,i,0))}function g(u){T.wasMoved(u)&&(e.disabled||v.value&&l.goToOption(z.Nothing))}return()=>{let{disabled:u}=e,y={active:v.value,selected:m.value,disabled:u},{value:s,disabled:x,...I}=e,b={id:i,ref:o,role:"option",tabIndex:u===!0?void 0:-1,"aria-disabled":u===!0?!0:void 0,"aria-selected":m.value,disabled:void 0,onClick:M,onFocus:C,onPointerenter:P,onMouseenter:P,onPointermove:R,onMousemove:R,onPointerleave:g,onMouseleave:g};return ie({ourProps:b,theirProps:I,slot:y,attrs:n,slots:r,name:"ListboxOption"})}}});const ne=Je(de.ui.strategy,de.ui.select,Ct),xe=Je(de.ui.strategy,de.ui.selectMenu,Mt),zl=J({components:{HCombobox:xl,HComboboxButton:Il,HComboboxOptions:Ml,HComboboxOption:wl,HComboboxInput:Cl,HListbox:$l,HListboxButton:El,HListboxOptions:Al,HListboxOption:Pl,UIcon:Ye,UAvatar:Xe},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array,Boolean],default:""},query:{type:String,default:null},by:{type:String,default:void 0},options:{type:Array,default:()=>[]},id:{type:String,default:null},name:{type:String,default:null},required:{type:Boolean,default:!1},icon:{type:String,default:null},loadingIcon:{type:String,default:()=>ne.default.loadingIcon},leadingIcon:{type:String,default:null},trailingIcon:{type:String,default:()=>ne.default.trailingIcon},trailing:{type:Boolean,default:!1},leading:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},selectedIcon:{type:String,default:()=>xe.default.selectedIcon},disabled:{type:Boolean,default:!1},multiple:{type:Boolean,default:!1},searchable:{type:[Boolean,Function],default:!1},searchablePlaceholder:{type:String,default:"Search..."},searchableLazy:{type:Boolean,default:!1},clearSearchOnClose:{type:Boolean,default:()=>xe.default.clearSearchOnClose},debounce:{type:Number,default:200},creatable:{type:Boolean,default:!1},showCreateOptionWhen:{type:[String,Function],default:()=>xe.default.showCreateOptionWhen},placeholder:{type:String,default:null},padded:{type:Boolean,default:!0},size:{type:String,default:null,validator(e){return Object.keys(ne.size).includes(e)}},color:{type:String,default:()=>ne.default.color,validator(e){return[...de.ui.colors,...Object.keys(ne.color)].includes(e)}},variant:{type:String,default:()=>ne.default.variant,validator(e){return[...Object.keys(ne.variant),...Object.values(ne.color).flatMap(r=>Object.keys(r))].includes(e)}},optionAttribute:{type:String,default:"label"},valueAttribute:{type:String,default:null},searchAttributes:{type:Array,default:null},popper:{type:Object,default:()=>({})},selectClass:{type:String,default:null},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})},uiMenu:{type:Object,default:()=>({})}},emits:["update:modelValue","update:query","open","close","change"],setup(e,{emit:r,slots:n}){const{ui:a,attrs:t}=Ue("select",Ve(e,"ui"),ne,Ve(e,"class")),{ui:i}=Ue("selectMenu",Ve(e,"uiMenu"),xe),l=S(()=>wt({},e.popper,i.value.popper)),[o,v]=Xt(l.value),{size:m,rounded:c}=Rt({ui:a,props:e}),{emitFormBlur:d,emitFormChange:p,inputId:M,color:C,size:T,name:P}=Vt(e,ne),R=S(()=>m.value??T.value),g=L(""),u=S({get(){return e.query??g.value},set(D){g.value=D,r("update:query",D)}}),y=S(()=>e.multiple?!Array.isArray(e.modelValue)||!e.modelValue.length?[]:e.valueAttribute?w.value.filter(D=>e.modelValue.includes(D[e.valueAttribute])):w.value.filter(D=>e.modelValue.includes(D)):e.valueAttribute?w.value.find(D=>D[e.valueAttribute]===e.modelValue):w.value.find(D=>D===e.modelValue)),s=S(()=>{var D;return e.multiple?Array.isArray(e.modelValue)&&e.modelValue.length?`${y.value.length} selected`:null:e.modelValue!==void 0&&e.modelValue!==null?e.valueAttribute?((D=y.value)==null?void 0:D[e.optionAttribute])??null:["string","number"].includes(typeof e.modelValue)?e.modelValue:e.modelValue[e.optionAttribute]:null}),x=S(()=>{var ae,Oe;const D=((Oe=(ae=a.value.color)==null?void 0:ae[C.value])==null?void 0:Oe[e.variant])||a.value.variant[e.variant];return kt(he(a.value.base,i.value.select,c.value,a.value.size[R.value],a.value.gap[R.value],e.padded?a.value.padding[R.value]:"p-0",D==null?void 0:D.replaceAll("{color}",C.value),(I.value||n.leading)&&a.value.leading.padding[R.value],(b.value||n.trailing)&&a.value.trailing.padding[R.value]),e.placeholder&&!e.modelValue&&a.value.placeholder,e.selectClass)}),I=S(()=>e.icon&&e.leading||e.icon&&!e.trailing||e.loading&&!e.trailing||e.leadingIcon),b=S(()=>e.icon&&e.trailing||e.loading&&e.trailing||e.trailingIcon),A=S(()=>e.loading?e.loadingIcon:e.leadingIcon||e.icon),f=S(()=>e.loading&&!I.value?e.loadingIcon:e.trailingIcon||e.icon),O=S(()=>he(a.value.icon.leading.wrapper,a.value.icon.leading.pointer,a.value.icon.leading.padding[R.value])),V=S(()=>he(a.value.icon.base,C.value&&de.ui.colors.includes(C.value)&&a.value.icon.color.replaceAll("{color}",C.value),a.value.icon.size[R.value],e.loading&&a.value.icon.loading)),$=S(()=>he(a.value.icon.trailing.wrapper,a.value.icon.trailing.pointer,a.value.icon.trailing.padding[R.value])),h=S(()=>he(a.value.icon.base,C.value&&de.ui.colors.includes(C.value)&&a.value.icon.color.replaceAll("{color}",C.value),a.value.icon.size[R.value],e.loading&&!I.value&&a.value.icon.loading)),U=e.searchable&&typeof e.searchable=="function"?Tt(e.searchable,e.debounce):void 0,w=_t(async()=>U?await U(u.value):e.options||[],[],{lazy:e.searchableLazy}),H=S(()=>!u.value||U?w.value:w.value.filter(D=>{var ae;return((ae=e.searchAttributes)!=null&&ae.length?e.searchAttributes:[e.optionAttribute]).some(Oe=>{if(["string","number"].includes(typeof D))return String(D).search(new RegExp(u.value,"i"))!==-1;const Re=$t(D,Oe);return Re!=null&&String(Re).search(new RegExp(u.value,"i"))!==-1})})),Y=S(()=>u.value===""||e.showCreateOptionWhen==="empty"&&H.value.length||e.showCreateOptionWhen==="always"&&H.value.find(ae=>["string","number"].includes(typeof ae)?ae===u.value:ae[e.optionAttribute]===u.value)||typeof e.showCreateOptionWhen=="function"&&!e.showCreateOptionWhen(u.value,H.value)?null:["string","number"].includes(typeof e.modelValue)?u.value:{[e.optionAttribute]:u.value});function we(){e.clearSearchOnClose&&(u.value="")}le(v,D=>{D?r("open"):(we(),r("close"),d())});function mt(D){r("update:modelValue",D),r("change",D),p()}function bt(D){u.value=D.target.value}return Et(()=>Gt("$YMH7mn4R4k")),{ui:a,uiMenu:i,attrs:t,name:P,inputId:M,popper:l,trigger:o,container:v,selected:y,label:s,isLeading:I,isTrailing:b,selectClass:x,leadingIconName:A,leadingIconClass:V,leadingWrapperIconClass:O,trailingIconName:f,trailingIconClass:h,trailingWrapperIconClass:$,filteredOptions:H,createOption:Y,query:u,onUpdate:mt,onQueryChange:bt}}}),Dl=["value","required"],Fl=["id","disabled"],Bl={class:"truncate"};function Ll(e,r,n,a,t,i){const l=Ye,o=Ze("HComboboxInput"),v=Xe;return E(),X(ge(e.searchable?"HCombobox":"HListbox"),{by:e.by,name:e.name,"model-value":e.multiple?Array.isArray(e.modelValue)?e.modelValue:[]:e.modelValue,multiple:e.multiple,disabled:e.disabled,as:"div",class:j(e.ui.wrapper),"onUpdate:modelValue":e.onUpdate},{default:F(({open:m})=>[e.required?(E(),W("input",{key:0,value:e.modelValue,required:e.required,class:j(e.uiMenu.required),tabindex:"-1","aria-hidden":"true"},null,10,Dl)):G("",!0),(E(),X(ge(e.searchable?"HComboboxButton":"HListboxButton"),{ref:"trigger",as:"div",role:"button",class:j(e.uiMenu.trigger)},{default:F(()=>[ue(e.$slots,"default",{open:m,disabled:e.disabled,loading:e.loading},()=>[q("button",ke({id:e.inputId,class:e.selectClass,disabled:e.disabled,type:"button"},e.attrs),[e.isLeading&&e.leadingIconName||e.$slots.leading?(E(),W("span",{key:0,class:j(e.leadingWrapperIconClass)},[ue(e.$slots,"leading",{selected:e.selected,disabled:e.disabled,loading:e.loading},()=>[k(l,{name:e.leadingIconName,class:j(e.leadingIconClass)},null,8,["name","class"])])],2)):G("",!0),ue(e.$slots,"label",{selected:e.selected},()=>[e.label?(E(),W("span",{key:0,class:j(e.uiMenu.label)},ee(e.label),3)):(E(),W("span",{key:1,class:j(e.uiMenu.label)},ee(e.placeholder||" "),3))]),e.isTrailing&&e.trailingIconName||e.$slots.trailing?(E(),W("span",{key:1,class:j(e.trailingWrapperIconClass)},[ue(e.$slots,"trailing",{selected:e.selected,disabled:e.disabled,loading:e.loading},()=>[k(l,{name:e.trailingIconName,class:j(e.trailingIconClass),"aria-hidden":"true"},null,8,["name","class"])])],2)):G("",!0)],16,Fl)])]),_:2},1032,["class"])),m?(E(),W("div",{key:1,ref:"container",class:j([e.uiMenu.container,e.uiMenu.width])},[k(At,ke({appear:""},e.uiMenu.transition),{default:F(()=>[q("div",null,[e.popper.arrow?(E(),W("div",{key:0,"data-popper-arrow":"",class:j(Object.values(e.uiMenu.arrow))},null,2)):G("",!0),(E(),X(ge(e.searchable?"HComboboxOptions":"HListboxOptions"),{static:"",class:j([e.uiMenu.base,e.uiMenu.ring,e.uiMenu.rounded,e.uiMenu.shadow,e.uiMenu.background,e.uiMenu.padding,e.uiMenu.height])},{default:F(()=>{var c,d;return[e.searchable?(E(),X(o,{key:0,"display-value":()=>e.query,name:"q",placeholder:e.searchablePlaceholder,autofocus:"",autocomplete:"off",class:j(e.uiMenu.input),onChange:e.onQueryChange},null,8,["display-value","placeholder","class","onChange"])):G("",!0),(E(!0),W(se,null,Fe(e.filteredOptions,(p,M)=>(E(),X(ge(e.searchable?"HComboboxOption":"HListboxOption"),{key:M,as:"template",value:e.valueAttribute?p[e.valueAttribute]:p,disabled:p.disabled},{default:F(({active:C,selected:T,disabled:P})=>[q("li",{class:j([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,C?e.uiMenu.option.active:e.uiMenu.option.inactive,T&&e.uiMenu.option.selected,P&&e.uiMenu.option.disabled])},[q("div",{class:j(e.uiMenu.option.container)},[ue(e.$slots,"option",{option:p,active:C,selected:T},()=>[p.icon?(E(),X(l,{key:0,name:p.icon,class:j([e.uiMenu.option.icon.base,C?e.uiMenu.option.icon.active:e.uiMenu.option.icon.inactive,p.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):p.avatar?(E(),X(v,ke({key:1,ref_for:!0},{size:e.uiMenu.option.avatar.size,...p.avatar},{class:e.uiMenu.option.avatar.base,"aria-hidden":"true"}),null,16,["class"])):p.chip?(E(),W("span",{key:2,class:j(e.uiMenu.option.chip.base),style:Pt({background:`#${p.chip}`})},null,6)):G("",!0),q("span",Bl,ee(["string","number"].includes(typeof p)?p:p[e.optionAttribute]),1)])],2),T?(E(),W("span",{key:0,class:j([e.uiMenu.option.selectedIcon.wrapper,e.uiMenu.option.selectedIcon.padding])},[k(l,{name:e.selectedIcon,class:j(e.uiMenu.option.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])],2)):G("",!0)],2)]),_:2},1032,["value","disabled"]))),128)),e.creatable&&e.createOption?(E(),X(ge(e.searchable?"HComboboxOption":"HListboxOption"),{key:1,value:e.createOption,as:"template"},{default:F(({active:p,selected:M})=>[q("li",{class:j([e.uiMenu.option.base,e.uiMenu.option.rounded,e.uiMenu.option.padding,e.uiMenu.option.size,e.uiMenu.option.color,p?e.uiMenu.option.active:e.uiMenu.option.inactive])},[q("div",{class:j(e.uiMenu.option.container)},[ue(e.$slots,"option-create",{option:e.createOption,active:p,selected:M},()=>[q("span",{class:j(e.uiMenu.option.create)},'Create "'+ee(e.createOption[e.optionAttribute])+'"',3)])],2)],2)]),_:3},8,["value"])):e.searchable&&e.query&&!((c=e.filteredOptions)!=null&&c.length)?(E(),W("p",{key:2,class:j(e.uiMenu.option.empty)},[ue(e.$slots,"option-empty",{query:e.query},()=>[oe(' No results for "'+ee(e.query)+'". ',1)])],2)):(d=e.filteredOptions)!=null&&d.length?G("",!0):(E(),W("p",{key:3,class:j(e.uiMenu.empty)},[ue(e.$slots,"empty",{query:e.query},()=>[oe(" No options. ")])],2))]}),_:3},8,["class"]))])]),_:3},16)],2)):G("",!0)]),_:3},8,["by","name","model-value","multiple","disabled","class","onUpdate:modelValue"])}const ft=De(zl,[["render",Ll]]),Ul={class:"grid grid-cols-2 gap-4"},jl=["onUpdate:modelValue","value","id"],Nl=["onKeydown","for"],ql=J({__name:"SourceStep",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(e){const r=Se(e,"form"),{data:n,refresh:a}=ht(),t=L({}),i=async()=>{var c,d,p;if(r.value.source===null)return;const{data:o,status:v,error:m}=await at(`/sources/${r.value.source}/stats`);if(t.value=o.value||{},v.value==="error"){const M=((c=m.value)==null?void 0:c.statusCode)===422?(d=m.value.data)==null?void 0:d.error:(p=m.value)==null?void 0:p.message;je().add({title:"Error fetching stats",description:M,color:"red"});return}if(!o.value){je().add({title:"No Data",description:"Empty stats received",color:"orange"});return}},l=L(!1);return le(()=>r.value.source,i),ce(i),(o,v)=>{const m=Ee,c=ft,d=gt;return E(),W("section",null,[k(m,{label:"Source",required:"",name:"source"},{default:F(()=>[q("div",Ul,[(E(!0),W(se,null,Fe(N(n),(p,M)=>(E(),W("div",{key:M},[zt(q("input",{type:"radio",name:"source","onUpdate:modelValue":C=>r.value.source=C,value:M,class:"sr-only peer",id:`source-${M}`,tabindex:"-1"},null,8,jl),[[Dt,r.value.source]]),q("label",{tabindex:"0",onKeydown:Ie(te(C=>r.value.driver=M,["prevent"]),["enter","space"]),for:`source-${M}`,class:"cursor-pointer flex flex-col gap-y-2 items-center rounded-lg p-4 text-gray-900 dark:text-white bg-white dark:bg-gray-900 ring-1 ring-gray-200 dark:ring-gray-800 peer-checked:ring-2 peer-checked:ring-primary-500"}," Source n°"+ee(M)+" (TODO user defined name) ",41,Nl)]))),128)),q("div",{class:"cursor-pointer flex flex-col gap-y-2 items-center rounded-lg p-4 text-gray-900 dark:text-white bg-white dark:bg-gray-900 ring-1 ring-gray-200 dark:ring-gray-800 peer-checked:ring-2 peer-checked:ring-primary-500",onClick:v[0]||(v[0]=te(p=>l.value=!0,["prevent"]))}," + CREATE SOURCE ")])]),_:1}),N(t)?(E(),X(m,{key:0,label:"Table",required:"",name:"table"},{default:F(()=>[k(c,{creatable:"",searchable:"",modelValue:r.value.table,"onUpdate:modelValue":v[1]||(v[1]=p=>r.value.table=p),options:Object.keys(N(t)),placeholder:"Select a table"},{"option-create":F(({option:p})=>[oe(" Force manual: "+ee(p),1)]),empty:F(()=>[oe("No tables available for the selected source.")]),_:1},8,["modelValue","options"])]),_:1})):G("",!0),k(d,{opened:N(l),"onUpdate:opened":v[2]||(v[2]=p=>et(l)?l.value=p:null),onCreated:N(a)},null,8,["opened","onCreated"])])}}}),Hl={class:"grid space-y-4"},Wl=["id"],Kl={class:"flex justify-between items-center"},Gl={class:"space-y-2"},Ql={class:"flex"},Jl={class:"flex"},Yl={class:"flex"},Xl={class:"flex"},Zl={class:"flex items-start justify-start mt-4 gap-8"},en={class:"flex gap-2"},tn=J({__name:"MappingeSelector",props:Ft({source:{},table:{},path:{}},{modelValue:{required:!1,default:[]},modelModifiers:{}}),emits:["update:modelValue"],async setup(e){let r,n;const a=Se(e,"modelValue"),t=e,{data:i,status:l,error:o}=([r,n]=Bt(()=>at(`/sources/${t.source}/stats`)),r=await r,n(),r),v=L([]),m=L([]),c=S({get:()=>m.value,set:async g=>{var u,y;for(const s of g)[...((y=(u=i.value)==null?void 0:u[t.table])==null?void 0:y.columns)||[],...v.value||[]].includes(s)||v.value.push((s==null?void 0:s.label)||s);m.value=g.map(s=>(s==null?void 0:s.label)||s).filter(s=>{var x;return!((x=a.value)!=null&&x.includes(s))})}}),d=S(()=>{var g,u;return[...((u=(g=i.value)==null?void 0:g[t.table])==null?void 0:u.columns)||[],...v.value||[]].filter(y=>!a.value.find(s=>(s==null?void 0:s._type)==="simple"&&(s==null?void 0:s.column)==y))}),p=()=>{var g,u;((g=c.value)==null?void 0:g.length)!=0&&(a.value=[...a.value||[],...(u=c.value)==null?void 0:u.map(y=>({_type:"simple",column:y}))],c.value=[])},M=()=>{a.value.push({_type:"relation",mapping:[],type:null,name:null,table:null,foreign_key:null,local_key:null})},C=g=>{a.value=a.value.filter((u,y)=>y!==g)},T=Be(),P=g=>[t.path,g].filter(u=>u).join("."),R=async g=>{T.value.preventScroll=!0,await Q(()=>{T.value.activeTabs="mapping",T.value.activeMappingPath=P(g)}),await Q(()=>T.value.preventScroll=!1)};return(g,u)=>{const y=Ut,s=Qt,x=He,I=Ee,b=jt,A=yt,f=ft,O=Zt,V=el,$=Ze("MappingeSelector",!0);return E(),W("div",Hl,[q("div",{class:j(["targettable grid space-y-4",{targetted:g.path?!1:P("")===N(T).activeMappingPath}]),id:g.path?void 0:"mapping-",onClick:u[0]||(u[0]=te(h=>g.path?void 0:R(""),["stop"])),onKeydown:u[1]||(u[1]=Ie(te(h=>g.path?void 0:R(""),["stop"]),["enter","space"]))},[(E(!0),W(se,null,Fe(a.value,(h,U)=>(E(),W(se,null,[h._type==="simple"?(E(),X(s,{key:0,ui:{body:{base:"flex justify-between items-center gap-x-2"}},class:j(["targettable",{targetted:P(h.column)===N(T).activeMappingPath}]),onClick:te(w=>R(h.column),["stop"]),onKeydown:Ie(te(w=>R(h.column),["stop"]),["enter","space"]),id:`mapping-${P(h.column)}`},{default:F(()=>[q("p",null,"Simple: "+ee(h.column),1),k(y,{color:"red",size:"xs",icon:"i-heroicons-trash",onClick:te(w=>C(U),["prevent"])},null,8,["onClick"])]),_:2},1032,["class","onClick","onKeydown","id"])):G("",!0),h._type==="relation"?(E(),X(s,{key:1,class:j(["targettable",{targetted:P(h.name)===N(T).activeMappingPath}]),onClick:te(w=>R(h.name),["stop"]),onKeydown:Ie(te(w=>R(h.name),["stop"]),["enter","space"]),id:`mapping-${P(h.name)}`},Lt({header:F(()=>[q("div",Kl,[q("p",null,"Relation: "+ee(h.name||"---"),1),k(y,{color:"red",size:"xs",icon:"i-heroicons-trash",onClick:te(w=>C(U),["prevent"])},null,8,["onClick"])])]),default:F(()=>[q("div",Gl,[k(I,{label:"Name",required:""},{default:F(()=>[k(x,{modelValue:h.name,"onUpdate:modelValue":w=>h.name=w},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),k(I,{label:"Type",required:""},{default:F(()=>[k(b,{modelValue:h.type,"onUpdate:modelValue":w=>h.type=w,options:["one-to-one","has-many"],required:""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),k(A,{label:"Configuration"}),k(I,{label:"Foreign Table",required:""},{default:F(()=>[k(f,{modelValue:h.table,"onUpdate:modelValue":w=>h.table=w,options:Object.keys(N(i)||{}),searchable:""},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024),k(I,{label:"Local key",required:""},{default:F(()=>{var w,H;return[q("div",Ql,[k(O,{class:"h-auto p-2 pointer-events-none select-none rounded-r-none border-l-0"},{default:F(()=>[oe(ee(g.table)+". ",1)]),_:1}),k(f,{modelValue:h.local_key,"onUpdate:modelValue":Y=>h.local_key=Y,class:"w-full",ui:{rounded:"rounded-md rounded-l-none"},options:((H=(w=N(i))==null?void 0:w[g.table])==null?void 0:H.columns)||[],searchable:""},null,8,["modelValue","onUpdate:modelValue","options"])])]}),_:2},1024),h.type==="has-many"?(E(),W(se,{key:0},[k(A,{label:"Pivot Configuration"}),k(V,{label:"Use pivot table",modelValue:h.use_pivot_table,"onUpdate:modelValue":w=>h.use_pivot_table=w},null,8,["modelValue","onUpdate:modelValue"]),h.use_pivot_table?(E(),W(se,{key:0},[k(I,{label:"Pivot Table",required:""},{default:F(()=>[k(f,{modelValue:h.pivot_table,"onUpdate:modelValue":w=>h.pivot_table=w,options:Object.keys(N(i)||{}),searchable:""},null,8,["modelValue","onUpdate:modelValue","options"])]),_:2},1024),k(I,{label:"Local Pivot key",required:""},{default:F(()=>{var w,H;return[q("div",Jl,[k(O,{class:"h-auto p-2 pointer-events-none select-none rounded-r-none border-l-0"},{default:F(()=>[oe(ee(h.pivot_table)+". ",1)]),_:2},1024),k(f,{modelValue:h.local_pivot_key,"onUpdate:modelValue":Y=>h.local_pivot_key=Y,class:"w-full",ui:{rounded:"rounded-md rounded-l-none"},options:((H=(w=N(i))==null?void 0:w[h.pivot_table])==null?void 0:H.columns)||[],searchable:""},null,8,["modelValue","onUpdate:modelValue","options"])])]}),_:2},1024),k(I,{label:"Foreign Pivot key",required:""},{default:F(()=>{var w,H;return[q("div",Yl,[k(O,{class:"h-auto p-2 pointer-events-none select-none rounded-r-none border-l-0"},{default:F(()=>[oe(ee(h.pivot_table)+". ",1)]),_:2},1024),k(f,{modelValue:h.foreign_pivot_key,"onUpdate:modelValue":Y=>h.foreign_pivot_key=Y,class:"w-full",ui:{rounded:"rounded-md rounded-l-none"},options:((H=(w=N(i))==null?void 0:w[h.pivot_table])==null?void 0:H.columns)||[],searchable:""},null,8,["modelValue","onUpdate:modelValue","options"])])]}),_:2},1024)],64)):G("",!0),k(A,{label:"Pivot Configuration End"})],64)):G("",!0),k(I,{label:"Foreign key",required:""},{default:F(()=>{var w,H;return[q("div",Xl,[k(O,{class:"h-auto p-2 pointer-events-none select-none rounded-r-none border-l-0"},{default:F(()=>[oe(ee(h.table)+". ",1)]),_:2},1024),k(f,{modelValue:h.foreign_key,"onUpdate:modelValue":Y=>h.foreign_key=Y,class:"w-full",ui:{rounded:"rounded-md rounded-l-none"},options:((H=(w=N(i))==null?void 0:w[h.table])==null?void 0:H.columns)||[],searchable:""},null,8,["modelValue","onUpdate:modelValue","options"])])]}),_:2},1024)])]),_:2},[h.table?{name:"footer",fn:F(()=>[k($,{source:g.source,table:h.table,modelValue:h.mapping,"onUpdate:modelValue":w=>h.mapping=w,path:P(h.name)},null,8,["source","table","modelValue","onUpdate:modelValue","path"])]),key:"0"}:void 0]),1032,["class","onClick","onKeydown","id"])):G("",!0)],64))),256))],42,Wl),q("div",Zl,[q("div",en,[k(f,{creatable:"",searchable:"",multiple:"","clear-search-on-close":"",options:N(d),modelValue:N(c),"onUpdate:modelValue":u[2]||(u[2]=h=>et(c)?c.value=h:null),placeholder:"Select a field to add"},null,8,["options","modelValue"]),k(y,{"trailing-icon":"i-heroicons-plus",onClick:te(p,["prevent","stop"]),disabled:!N(c)},{default:F(()=>[oe(" Add Simple Fields ")]),_:1},8,["disabled"])]),q("div",null,[k(y,{"trailing-icon":"i-heroicons-plus",onClick:te(M,["prevent","stop"])},{default:F(()=>[oe(" Add Relation ")]),_:1})])])])}}}),ln=De(tn,[["__scopeId","data-v-f6d95866"]]),nn=J({__name:"MappingStep",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(e){const r=Se(e,"form");L(!1);const n=Be();let a="";return le(n.value,(t,i)=>{a!==t.activeMappingPath&&(a=t.activeMappingPath,!n.value.preventScroll&&Q(()=>{var l;(l=document.getElementById("mapping-"+t.activeMappingPath))==null||l.scrollIntoView({block:"start",inline:"start",behavior:"instant"})}))}),(t,i)=>{const l=ln;return E(),W("div",{class:j({"short-mode":N(n).shortMode})},[k(l,{source:r.value.source,table:r.value.table,modelValue:r.value.mapping,"onUpdate:modelValue":i[0]||(i[0]=o=>r.value.mapping=o)},null,8,["source","table","modelValue"])],2)}}}),on=De(nn,[["__scopeId","data-v-32faad5c"]]),an=J({__name:"OutputStep",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(e){const r=Se(e,"form");return Nt(()=>{var n,a;(a=r.value).index||(a.index=(n=r.value)==null?void 0:n.table)}),(n,a)=>{const t=He,i=Ee;return E(),W("section",null,[k(i,{label:"Index",required:"",name:"index"},{default:F(()=>[k(t,{modelValue:r.value.index,"onUpdate:modelValue":a[0]||(a[0]=l=>r.value.index=l),placeholder:"Enter index"},null,8,["modelValue"])]),_:1})])}}}),un={class:"flex flex-col flex-1 gap-y-4 max-h-screen overflow-auto p-4"},vn=J({__name:"RightPanel",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(e){const r=Se(e,"form"),n=Be();return(a,t)=>{const i=ql,l=on,o=an;return E(),W("div",un,[N(n).activeTabs==="source"?(E(),X(i,{key:0,form:r.value,"onUpdate:form":t[0]||(t[0]=v=>r.value=v)},null,8,["form"])):G("",!0),N(n).activeTabs==="mapping"?(E(),X(l,{key:1,form:r.value,"onUpdate:form":t[1]||(t[1]=v=>r.value=v)},null,8,["form"])):G("",!0),N(n).activeTabs==="output"?(E(),X(o,{key:2,form:r.value,"onUpdate:form":t[2]||(t[2]=v=>r.value=v)},null,8,["form"])):G("",!0)])}}});export{vn as default};
