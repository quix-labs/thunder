import{g as y,r as N,o as i,c as d,b as l,w as u,N as t,V,a as _,O as D,d as p,F as b,P as B,Y as E,J as F,t as L,Z as k,_ as O}from"./BKG60nu4.js";import{_ as U,b as h}from"./DeTryvP5.js";import{u as M,a as $,_ as H}from"./CLUdDyY2.js";import"./Bd7Rp3Wh.js";const j={class:"flex gap-x-2 items-center justify-between"},A={class:"grid grid-cols-3"},G=["innerHTML"],I=y({__name:"sources",setup(J){const o=N(!1),{data:w,refresh:m}=M(),{data:c}=$(),T=async f=>{var a;const{data:e,error:r,status:n}=await h(`/sources/${f}`,{method:"DELETE"});if(n.value==="error")k().add({color:"red",title:"Unable to delete source",description:(a=r.value)==null?void 0:a.message});else if(n.value==="success"){const s=e.value;k().add({color:"green",title:"Successfully deleted source",description:s.message})}await m()};return(f,e)=>{const r=E,n=U,a=H;return i(),d("section",null,[l(n,null,{header:u(()=>[_("div",j,[e[3]||(e[3]=_("h1",null,"Data Sources",-1)),l(r,{onClick:e[0]||(e[0]=D(s=>o.value=!t(o),["prevent"])),variant:"soft"},{default:u(()=>e[2]||(e[2]=[p("+ Add Source")])),_:1})])]),default:u(()=>[_("div",A,[(i(!0),d(b,null,B(t(w)||[],(s,v)=>{var g,C,S,x;return i(),d("div",null,[t(c)&&((C=(g=t(c)[s.driver])==null?void 0:g.config)!=null&&C.image)?(i(),d("span",{key:0,innerHTML:(x=(S=t(c)[s.driver])==null?void 0:S.config)==null?void 0:x.image,class:"nested-svg"},null,8,G)):F("",!0),p(" Source nÂ°"+L(v)+" (TODO user defined name) ",1),l(r,{color:"red",icon:"i-heroicons-trash",onClick:D(P=>T(v),["prevent"])},{default:u(()=>e[4]||(e[4]=[p(" Delete ")])),_:2},1032,["onClick"])])}),256))])]),_:1}),l(a,{opened:t(o),"onUpdate:opened":e[1]||(e[1]=s=>V(o)?o.value=s:null),onCreated:t(m)},null,8,["opened","onCreated"])])}}}),z=O(I,[["__scopeId","data-v-a8974149"]]);export{z as default};
