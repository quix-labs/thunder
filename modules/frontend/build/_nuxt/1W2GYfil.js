const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./Cm3g6n8P.js","./xJoB7j-o.js","./B1XcprnM.js","./entry.DSrKHs56.css","./Dyaprf0m.js","./useGoFetch.Cg6qBO-I.css","./CQFv-p7I.js","./CZbsTHVI.js","./useSources.Be7ST0Az.css","./CYFuiMpW.js","./useTargets.DHNXSrSi.css","./RightPanel.BuNwCrhp.css","./CiNmSCMe.js","./SamplePanel._o2deULb.css"])))=>i.map(i=>d[i]);
import{r as K,f as I,g as R,i as pe,h as me,s as ve,j as fe,k as ge,l as be,m as Y,E as ye,A as he,T as xe,F as W,n as Z,_ as te,p as ke,q as J,v as Q,x as we,y as ae,z as _e,B as $e,C as H,D as Se,G as ne,o as h,H as B,w as k,a as g,I as D,c as w,b as y,J as C,K as Ce,L as Pe,M as Ie,N as v,O as _,t as z,d as j,P as oe,Q as F,R as se,S as ee,U as ze,V as G,W as le,X as re,Y as ie,Z as M,$ as Te}from"./B1XcprnM.js";import{f as Ue,u as Ve,_ as de,a as Me,b as L,c as De,d as Oe,e as Ee}from"./Dyaprf0m.js";const Ae={base:"relative inline-flex flex-shrink-0 border-2 border-transparent disabled:cursor-not-allowed disabled:opacity-50 focus:outline-none",rounded:"rounded-full",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",active:"bg-{color}-500 dark:bg-{color}-400",inactive:"bg-gray-200 dark:bg-gray-700",size:{"2xs":"h-3 w-5",xs:"h-3.5 w-6",sm:"h-4 w-7",md:"h-5 w-9",lg:"h-6 w-11",xl:"h-7 w-[3.25rem]","2xl":"h-8 w-[3.75rem]"},container:{base:"pointer-events-none relative inline-block rounded-full bg-white dark:bg-gray-900 shadow transform ring-0 transition ease-in-out duration-200",active:{"2xs":"translate-x-2 rtl:-translate-x-2",xs:"translate-x-2.5 rtl:-translate-x-2.5",sm:"translate-x-3 rtl:-translate-x-3",md:"translate-x-4 rtl:-translate-x-4",lg:"translate-x-5 rtl:-translate-x-5",xl:"translate-x-6 rtl:-translate-x-6","2xl":"translate-x-7 rtl:-translate-x-7"},inactive:"translate-x-0 rtl:-translate-x-0",size:{"2xs":"h-2 w-2",xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5",xl:"h-6 w-6","2xl":"h-7 w-7"}},icon:{base:"absolute inset-0 h-full w-full flex items-center justify-center transition-opacity",active:"opacity-100 ease-in duration-200",inactive:"opacity-0 ease-out duration-100",size:{"2xs":"h-2 w-2",xs:"h-2 w-2",sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4",xl:"h-5 w-5","2xl":"h-6 w-6"},on:"text-{color}-500 dark:text-{color}-400",off:"text-gray-400 dark:text-gray-500",loading:"animate-spin text-{color}-500 dark:text-{color}-400"},default:{onIcon:null,offIcon:null,loadingIcon:"i-heroicons-arrow-path-20-solid",color:"primary",size:"md"}};function Be(e,o,a){let c=K(a==null?void 0:a.value),r=I(()=>e.value!==void 0);return[I(()=>r.value?e.value:c.value),function(s){return r.value||(c.value=s),o==null?void 0:o(s)}]}function Ne(e={},o=null,a=[]){for(let[c,r]of Object.entries(e))ce(a,ue(o,c),r);return a}function ue(e,o){return e?e+"["+o+"]":o}function ce(e,o,a){if(Array.isArray(a))for(let[c,r]of a.entries())ce(e,ue(o,c.toString()),r);else a instanceof Date?e.push([o,a.toISOString()]):typeof a=="boolean"?e.push([o,a?"1":"0"]):typeof a=="string"?e.push([o,a]):typeof a=="number"?e.push([o,`${a}`]):a==null?e.push([o,""]):Ne(a,o,e)}function je(e){var o,a;let c=(o=e==null?void 0:e.form)!=null?o:e.closest("form");if(c){for(let r of c.elements)if(r!==e&&(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image")){r.click();return}(a=c.requestSubmit)==null||a.call(c)}}let Le=Symbol("GroupContext"),Ke=R({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(e,{emit:o,attrs:a,slots:c,expose:r}){var s;let n=(s=e.id)!=null?s:`headlessui-switch-${pe()}`,d=me(Le,null),[l,p]=Be(I(()=>e.modelValue),t=>o("update:modelValue",t),I(()=>e.defaultChecked));function u(){p(!l.value)}let T=K(null),$=d===null?T:d.switchRef,P=ve(I(()=>({as:e.as,type:a.type})),$);r({el:$,$el:$});function U(t){t.preventDefault(),u()}function O(t){t.key===Z.Space?(t.preventDefault(),u()):t.key===Z.Enter&&je(t.currentTarget)}function A(t){t.preventDefault()}let f=I(()=>{var t,i;return(i=(t=fe($))==null?void 0:t.closest)==null?void 0:i.call(t,"form")});return ge(()=>{be([f],()=>{if(!f.value||e.defaultChecked===void 0)return;function t(){p(e.defaultChecked)}return f.value.addEventListener("reset",t),()=>{var i;(i=f.value)==null||i.removeEventListener("reset",t)}},{immediate:!0})}),()=>{let{name:t,value:i,form:b,tabIndex:x,...S}=e,V={checked:l.value},E={id:n,ref:$,role:"switch",type:P.value,tabIndex:x===-1?0:x,"aria-checked":l.value,"aria-labelledby":d==null?void 0:d.labelledby.value,"aria-describedby":d==null?void 0:d.describedby.value,onClick:U,onKeyup:O,onKeypress:A};return Y(W,[t!=null&&l.value!=null?Y(Ue,ye({features:Ve.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:l.value,form:b,disabled:S.disabled,name:t,value:i})):null,he({ourProps:E,theirProps:{...a,...xe(S,["modelValue","defaultChecked"])},slot:V,attrs:a,slots:c,name:"Switch"})])}}});const N=ke(J.ui.strategy,J.ui.toggle,Ae),Fe=R({components:{HSwitch:Ke,UIcon:Q},inheritAttrs:!1,props:{id:{type:String,default:null},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},onIcon:{type:String,default:()=>N.default.onIcon},offIcon:{type:String,default:()=>N.default.offIcon},loadingIcon:{type:String,default:()=>N.default.loadingIcon},color:{type:String,default:()=>N.default.color,validator(e){return J.ui.colors.includes(e)}},size:{type:String,default:()=>N.default.size,validator(e){return Object.keys(N.size).includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:o}){const{ui:a,attrs:c}=we("toggle",ae(e,"ui"),N),{emitFormChange:r,color:s,inputId:n,name:d}=_e(e),l=I({get(){return e.modelValue},set(U){o("update:modelValue",U),o("change",U),r()}}),p=I(()=>$e(H(a.value.base,a.value.size[e.size],a.value.rounded,s.value&&a.value.ring.replaceAll("{color}",s.value),s.value&&(l.value?a.value.active:a.value.inactive).replaceAll("{color}",s.value)),e.class)),u=I(()=>H(a.value.container.base,a.value.container.size[e.size],l.value?a.value.container.active[e.size]:a.value.container.inactive)),T=I(()=>H(a.value.icon.size[e.size],s.value&&a.value.icon.on.replaceAll("{color}",s.value))),$=I(()=>H(a.value.icon.size[e.size],s.value&&a.value.icon.off.replaceAll("{color}",s.value))),P=I(()=>H(a.value.icon.size[e.size],s.value&&a.value.icon.loading.replaceAll("{color}",s.value)));return Se(()=>Pe()),{ui:a,attrs:c,name:d,inputId:n,active:l,switchClass:p,containerClass:u,onIconClass:T,offIconClass:$,loadingIconClass:P}}});function Re(e,o,a,c,r,s){const n=Q,d=ne("HSwitch");return h(),B(d,Ce({id:e.inputId,modelValue:e.active,"onUpdate:modelValue":o[0]||(o[0]=l=>e.active=l),name:e.name,disabled:e.disabled||e.loading,class:e.switchClass},e.attrs),{default:k(()=>[g("span",{class:D(e.containerClass)},[e.loading?(h(),w("span",{key:0,class:D([e.ui.icon.active,e.ui.icon.base]),"aria-hidden":"true"},[y(n,{name:e.loadingIcon,class:D(e.loadingIconClass)},null,8,["name","class"])],2)):C("",!0),!e.loading&&e.onIcon?(h(),w("span",{key:1,class:D([e.active?e.ui.icon.active:e.ui.icon.inactive,e.ui.icon.base]),"aria-hidden":"true"},[y(n,{name:e.onIcon,class:D(e.onIconClass)},null,8,["name","class"])],2)):C("",!0),!e.loading&&e.offIcon?(h(),w("span",{key:2,class:D([e.active?e.ui.icon.inactive:e.ui.icon.active,e.ui.icon.base]),"aria-hidden":"true"},[y(n,{name:e.offIcon,class:D(e.offIconClass)},null,8,["name","class"])],2)):C("",!0)],2)]),_:1},16,["id","modelValue","name","disabled","class"])}const He=te(Fe,[["render",Re]]);function X(){return Ie("process-form",()=>ae({activeTabs:"source",preventScroll:!1,shortMode:!1,liveReload:!0,showSamplePanel:!0}))}const qe={key:2,class:"italic opacity-60"},Ge={key:3},Je={key:0,class:"text-gray-400 ml-2"},We=["onKeydown","onClick"],Qe={key:0,class:"italic text-sm"},Xe={key:1},Ye={key:1,class:"inline-flex items-baseline relative"},Ze=R({__name:"MappingThree",props:{mapping:{default:()=>[]},name:{},as:{},path:{}},setup(e){const o=K(!1),a=X(),c=async n=>{a.value.activeTabs="mapping",a.value.activeMappingPath=r(n)},r=n=>[e.path,n].filter(d=>d).join("."),s=n=>{var d;return((d=a.value.activeMappingPath)==null?void 0:d.startsWith(r(n)+"."))||a.value.activeMappingPath===r(n)||r(n)===""};return(n,d)=>{const l=Q,p=ne("MappingThree",!0);return h(),w("div",{tabindex:"0",class:D(["text-sm leading-tight",{"font-bold":r("")===(v(a).activeMappingPath||"")}]),onClick:d[3]||(d[3]=_(u=>c(""),["prevent","stop"])),onKeydown:d[4]||(d[4]=F(_(u=>c(""),["prevent","stop"]),["enter","space"]))},[g("div",{class:D(["inline-flex items-baseline leading-normal relative w-full dark:hover:bg-white/5 hover:bg-primary/5",{underline:r("")===(v(a).activeMappingPath||"")}])},[n.path&&!v(o)?(h(),B(l,{key:0,class:"carret hover:text-sky-600",name:"i-heroicons-chevron-down",onClick:d[0]||(d[0]=_(u=>o.value=!0,["prevent","stop"]))})):n.path?(h(),B(l,{key:1,class:"carret hover:text-sky-600",name:"i-heroicons-chevron-right",onClick:d[1]||(d[1]=_(u=>o.value=!1,["prevent","stop"]))})):C("",!0),n.name&&n.name!==n.as?(h(),w("span",qe,z(n.name)+": ",1)):C("",!0),n.as?(h(),w("span",Ge,z(n.as)+" ",1)):C("",!0),g("p",{onClick:d[2]||(d[2]=_(u=>o.value=!v(o),["prevent","stop"])),class:"hover:text-sky-600"},[j(z(v(o)?"{...}":"{")+" ",1),v(o)?(h(),w("span",Je,z(n.mapping.length>=2?`// ${n.mapping.length} items`:`// ${n.mapping.length} item`),1)):C("",!0)])],2),v(o)?C("",!0):(h(!0),w(W,{key:0},oe(n.mapping,u=>(h(),w("div",{class:D(["pl-4 cursor-pointer dark:hover:bg-white/5 hover:bg-primary/5",{"border-l border-dashed":!0,"border-sky-600 dark:border-green-400/60":s(""),"border-[#bfcbd9]":!s("")}])},[u._type==="simple"?(h(),w("p",{key:0,class:D({"font-bold underline":r(u.column)===(v(a).activeMappingPath||"")}),onKeydown:F(_(T=>c(u.column),["prevent","stop"]),["enter","space"]),onClick:_(T=>c(u.column),["prevent","stop"]),tabindex:"0"},[u.name&&u.name!==u.column?(h(),w("span",Qe,z(u.name)+": ",1)):C("",!0),u.column?(h(),w("span",Xe,z(u.column),1)):C("",!0)],42,We)):u._type==="relation"?(h(),B(p,{key:1,mapping:u.mapping,name:u.table,as:u.name,path:r(u.name)},null,8,["mapping","name","as","path"])):C("",!0)],2))),256)),v(o)?C("",!0):(h(),w("span",Ye,"}"))],34)}}}),et=te(Ze,[["__scopeId","data-v-a6e5187f"]]),tt={class:"flex flex-col flex-1 gap-y-4 max-h-screen overflow-auto p-4"},at={class:"font-semibold"},nt={class:"font-normal"},ot={class:"font-semibold"},st={class:"font-normal"},lt=R({__name:"LeftPanel",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(e){const o=se(e,"form"),a=X();function c(r){a.value.activeTabs=r}return(r,s)=>{const n=de,d=et;return h(),w("div",tt,[y(n,{tabindex:"0",class:"cursor-pointer",onClick:s[0]||(s[0]=_(l=>c("source"),["prevent"])),onKeydown:s[1]||(s[1]=F(l=>c("source"),["enter","space"])),ui:v(a).activeTabs==="source"?{ring:"ring-1 ring-primary dark:ring-primary"}:void 0},{header:k(()=>s[6]||(s[6]=[g("p",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"}," Source ",-1),g("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Describe which data will be synchronized ",-1)])),default:k(()=>{var l;return[g("p",null,"Source: Source n°"+z(o.value.source),1),g("p",null,"Table: "+z(o.value.table||"---"),1),g("p",null,"Conditions: "+z(((l=o.value.conditions)==null?void 0:l.length)||"---")+" TODO",1)]}),_:1},8,["ui"]),y(n,{tabindex:"0",class:"flex-1 cursor-pointer",onClick:s[2]||(s[2]=_(l=>c("mapping"),["prevent"])),onKeydown:s[3]||(s[3]=F(l=>c("mapping"),["enter","space"])),ui:v(a).activeTabs==="mapping"?{ring:"ring-1 ring-primary dark:ring-primary"}:void 0},{header:k(()=>s[7]||(s[7]=[g("p",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"}," Mapping ",-1),g("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Describe how to transform your relational data into unstructured documents ",-1)])),default:k(()=>[y(d,{mapping:o.value.mapping,name:o.value.table,as:o.value.index},null,8,["mapping","name","as"])]),_:1},8,["ui"]),y(n,{tabindex:"0",class:"cursor-pointer",onClick:s[4]||(s[4]=_(l=>c("output"),["prevent"])),onKeydown:s[5]||(s[5]=F(l=>c("output"),["enter","space"])),ui:v(a).activeTabs==="output"?{ring:"ring-1 ring-primary dark:ring-primary"}:void 0},{header:k(()=>s[8]||(s[8]=[g("p",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"}," Output ",-1),g("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Describe how your data will be synchronized ",-1)])),default:k(()=>{var l,p;return[g("p",at,[s[9]||(s[9]=j(" Targets: ")),g("span",nt,z((p=(l=o.value.targets)==null?void 0:l.map(u=>`Target n°${u}`))==null?void 0:p.join(", ")),1)]),g("p",ot,[s[10]||(s[10]=j(" Expected index: ")),g("span",st,z(o.value.index),1)])]}),_:1},8,["ui"])])}}}),rt=le(()=>re(()=>import("./Cm3g6n8P.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url).then(e=>e.default||e)),it=le(()=>re(()=>import("./CiNmSCMe.js"),__vite__mapDeps([12,2,3,4,5,13]),import.meta.url).then(e=>e.default||e)),dt={class:"flex flex-col flex-1 relative"},ut={class:"col-span-full flex justify-between border-b p-4"},ct={class:"flex gap-x-4"},pt={key:0,class:"flex items-center gap-x-4 cursor-pointer"},mt={class:"flex items-center gap-x-4 cursor-pointer"},vt=R({__name:"Complete",props:ee({mode:{default:"create"},processor:{}},{opened:{},openedModifiers:{}}),emits:ee(["created","updated"],["update:opened"]),setup(e,{emit:o}){const a=se(e,"opened"),c=o,r=X(),s=ze({source:null,table:null,primary_keys:[],conditions:[],targets:[],index:null,mapping:[]}),n=I(()=>e.processor||s),d=async()=>{var l,p,u,T;if(e.mode==="create"){const{status:$,error:P,data:U}=await L("/processors",{method:"post",body:n,watch:!1});if($.value==="success"){const O=U.value;M().add({title:"Success",color:"green",description:O.message}),c("created"),a.value=!1;return}$.value==="error"&&M().add({title:"Error",description:(l=P.value)==null?void 0:l.message,color:"red"})}else if(e.mode==="edit"){const{status:$,error:P,data:U}=await L(`/processors/${e.processor.id}`,{method:"put",body:n,watch:!1});if($.value==="success"){const O=U.value;M().add({title:"Success",color:"green",description:O.message}),c("updated"),a.value=!1;return}$.value==="error"&&M().add({title:"Error",description:((u=(p=P==null?void 0:P.value)==null?void 0:p.data)==null?void 0:u.error)||((T=P.value)==null?void 0:T.message),color:"red"})}};return(l,p)=>{const u=He,T=lt,$=rt,P=it,U=ie,O=Me;return h(),w("section",dt,[y(O,{modelValue:a.value,"onUpdate:modelValue":p[5]||(p[5]=A=>a.value=A),class:"overflow-y-auto",onKeydown:F(_(d,["ctrl","prevent"]),["enter"]),ui:v(r).showSamplePanel?l.mode==="read"?{width:"w-screen max-w-[40vw]"}:{width:"w-screen max-w-[70vw]"}:l.mode==="read"?{width:"w-screen max-w-[25vw]"}:{width:"w-screen max-w-[55vw]"}},{default:k(()=>{var A,f;return[g("div",{class:D(["grid min-h-screen grid-rows-[auto_1fr_auto]",{"grid-cols-[2fr_3fr]":l.mode!=="read"&&!v(r).showSamplePanel,"grid-cols-[2fr_3fr_15vw]":l.mode!=="read"&&v(r).showSamplePanel,"grid-cols-[1fr_15vw]":v(r).showSamplePanel&&l.mode=="read"}])},[g("div",ut,[g("h2",{onClick:_(d,["prevent"]),class:"col-span-full text-center text-2xl font-semibold"},z({create:"New processor",edit:`Edit processor: ${(A=l.processor)==null?void 0:A.id}`,read:`Processor: ${(f=l.processor)==null?void 0:f.id}`}[l.mode]),1),g("div",ct,[l.mode!=="read"?(h(),w("label",pt,[p[6]||(p[6]=j(" Short Mode (beta): ")),y(u,{"on-icon":"i-heroicons-check-20-solid","off-icon":"i-heroicons-x-mark-20-solid",modelValue:v(r).shortMode,"onUpdate:modelValue":p[0]||(p[0]=t=>v(r).shortMode=t)},null,8,["modelValue"])])):C("",!0),g("label",mt,[p[7]||(p[7]=j(" Sample Tab: ")),y(u,{"on-icon":"i-heroicons-check-20-solid","off-icon":"i-heroicons-x-mark-20-solid",modelValue:v(r).showSamplePanel,"onUpdate:modelValue":p[1]||(p[1]=t=>v(r).showSamplePanel=t)},null,8,["modelValue"])])])]),y(T,{form:v(n),"onUpdate:form":p[2]||(p[2]=t=>G(n)?n.value=t:null)},null,8,["form"]),l.mode!=="read"?(h(),B($,{key:0,form:v(n),"onUpdate:form":p[3]||(p[3]=t=>G(n)?n.value=t:null)},null,8,["form"])):C("",!0),v(r).showSamplePanel?(h(),B(P,{key:1,form:v(n),"onUpdate:form":p[4]||(p[4]=t=>G(n)?n.value=t:null)},null,8,["form"])):C("",!0),l.mode!=="read"?(h(),B(U,{key:2,class:"col-span-full",onClick:_(d,["prevent"]),size:"xl",block:"",ui:{rounded:""}},{default:k(()=>[j(z({create:"Create",edit:"Save changes"}[l.mode]),1)]),_:1})):C("",!0)],2)]}),_:1},8,["modelValue","onKeydown","ui"])])}}}),ft={class:"flex gap-1"},gt={class:"flex gap-1"},bt={class:"flex gap-1"},yt={class:"flex gap-1"},ht=R({__name:"processors",setup(e){const{status:o,data:a}=Te(),c=[{key:"id",label:"#",sortable:!0,rowClass:"w-[1px] whitespace-nowrap"},{key:"source",label:"Source",sortable:!0},{key:"index",label:"Index",sortable:!0},{key:"targets",label:"Targets",sortable:!1},{key:"stats",label:"Stats",sortable:!1},{key:"listening",label:"Listening",sortable:!1},{key:"indexing",label:"Indexing",sortable:!1},{key:"actions",sortable:!1,rowClass:"w-[1px] whitespace-nowrap"}],r=I(()=>{var f;return((f=a.value)==null?void 0:f.map(t=>{var i;return{id:t.id,targets:t.targets,index:t.index||"---",source:t.source!==void 0?t.source:"---",stats:{conditions:((i=t.conditions)==null?void 0:i.length)||0,...s(t.mapping||[])},indexing:t.indexing||!1,listening:t.listening||!1}}))||[]}),s=f=>{const t=f.filter(b=>b._type==="relation"),i={total:f.length,relations:t.length};return f.filter(b=>b._type==="relation").forEach(b=>{const{total:x,relations:S}=s(b.mapping||[]);i.total+=x,i.relations+=S}),i},n=K(!1),d=K("create"),l=K(),p=async()=>{d.value="create",l.value=void 0,n.value=!0},u=async f=>{var t,i;d.value="read",l.value=(i=(t=a.value)==null?void 0:t.filter(b=>b.id===f))==null?void 0:i.at(0),n.value=!0},T=async f=>{var t,i;d.value="edit",l.value=(i=(t=a.value)==null?void 0:t.filter(b=>b.id===f))==null?void 0:i.at(0),n.value=!0},$=async f=>{var t,i;d.value="create",l.value={...(i=(t=a.value)==null?void 0:t.filter(b=>b.id===f))==null?void 0:i.at(0)},n.value=!0},P=async f=>{var x;const{data:t,error:i,status:b}=await L(`/processors/${f}`,{method:"DELETE"});if(b.value==="error")M().add({color:"red",title:"Unable to delete processor",description:(x=i.value)==null?void 0:x.message});else if(b.value==="success"){const S=t.value;M().add({color:"green",title:"Successfully deleted processor",description:S.message})}},U=f=>{L(`/processors/${f}/index`,{method:"POST"}).then(({data:t,error:i,status:b})=>{var x,S,V;if(b.value==="error")M().add({color:"red",title:"Unable to indexing",description:((S=(x=i.value)==null?void 0:x.data)==null?void 0:S.error)||((V=i.value)==null?void 0:V.message)});else if(b.value==="success"){const E=t.value;M().add({color:"green",title:"Successfully indexed",description:E.message})}})},O=f=>{L(`/processors/${f}/start`,{method:"POST"}).then(({data:t,error:i,status:b})=>{var x,S,V;if(b.value==="error")M().add({color:"red",title:"Unable to start",description:((S=(x=i.value)==null?void 0:x.data)==null?void 0:S.error)||((V=i.value)==null?void 0:V.message)});else if(b.value==="success"){const E=t.value;M().add({color:"green",title:"Successfully started",description:E.message})}})},A=f=>{L(`/processors/${f}/stop`,{method:"POST"}).then(({data:t,error:i,status:b})=>{var x,S,V;if(b.value==="error")M().add({color:"red",title:"Unable to stop",description:((S=(x=i.value)==null?void 0:x.data)==null?void 0:S.error)||((V=i.value)==null?void 0:V.message)});else if(b.value==="success"){const E=t.value;M().add({color:"green",title:"Successfully stopped",description:E.message})}})};return(f,t)=>{const i=ie,b=De,x=Oe,S=Ee,V=de,E=vt;return h(),w("section",null,[y(V,{class:"w-full",ui:{divide:"divide-y divide-gray-200 dark:divide-gray-700",body:{padding:""},header:{base:"flex gap-x-2 justify-between items-center"},footer:{base:"text-sm leading-5 text-center"}}},{header:k(()=>[t[4]||(t[4]=g("h1",{class:"font-semibold text-xl text-gray-900 dark:text-white leading-tight"},"Processors",-1)),y(i,{onClick:_(p,["prevent"]),variant:"soft"},{default:k(()=>t[3]||(t[3]=[j("+ Add Processor")])),_:1})]),default:k(()=>[y(S,{onSelect:t[1]||(t[1]=m=>u(m.id)),columns:c,rows:v(r),sort:{column:"id",direction:"desc"},loading:v(o)==="pending"||v(o)==="idle"},{"actions-data":k(({row:m})=>[g("div",ft,[y(b,{items:[[{label:"Replicate",click:()=>$(m.id)},{label:"Claim indexing",click:()=>U(m.id),disabled:m.indexing},{label:"Start listening",click:()=>O(m.id),disabled:m.listening},{label:"Stop listening",click:()=>A(m.id),disabled:!m.listening}]],onClick:t[0]||(t[0]=_(()=>{},["stop"]))},{default:k(()=>[y(i,{icon:"i-heroicons-ellipsis-horizontal",variant:"link",color:"gray",size:"xl",padded:!1})]),_:2},1032,["items"]),y(i,{icon:"i-heroicons-eye",variant:"link",color:"gray",size:"xl",padded:!1,onClick:_(q=>u(m.id),["stop","prevent"])},null,8,["onClick"]),y(i,{icon:"i-heroicons-pencil-square",variant:"link",color:"gray",size:"xl",padded:!1,onClick:_(q=>T(m.id),["stop","prevent"])},null,8,["onClick"]),y(i,{icon:"i-heroicons-trash",variant:"link",color:"red",size:"xl",padded:!1,onClick:_(q=>P(m.id),["stop","prevent"])},null,8,["onClick"])])]),"targets-data":k(({row:m})=>[g("div",gt,[(h(!0),w(W,null,oe(m.targets,q=>(h(),B(x,{size:"xs",label:`Target n°${q}`,color:"sky",variant:"subtle"},null,8,["label"]))),256))])]),"source-data":k(({row:m})=>[g("div",bt,[y(x,{size:"xs",label:`Source n°${m.source}`,color:"sky",variant:"subtle"},null,8,["label"])])]),"stats-data":k(({row:m})=>[g("div",yt,[y(x,{size:"xs",label:`${m.stats.total} fields`,color:"gray"},null,8,["label"]),y(x,{size:"xs",label:`${m.stats.relations} relations`,color:"gray"},null,8,["label"]),y(x,{size:"xs",label:`${m.stats.conditions} conditions`,color:"gray"},null,8,["label"])])]),"indexing-data":k(({row:m})=>[y(x,{size:"xs",label:m.indexing?"Indexing":"Not indexing",color:m.indexing?"green":"red"},null,8,["label","color"])]),"listening-data":k(({row:m})=>[y(x,{size:"xs",label:m.listening?"Listening":"Not listening",color:m.listening?"green":"red"},null,8,["label","color"])]),_:1},8,["rows","loading"])]),footer:k(()=>{var m;return[t[5]||(t[5]=g("span",{class:"font-medium"},"Total: ",-1)),g("span",null,z(((m=v(r))==null?void 0:m.length)||0)+" processors",1)]}),_:1}),y(E,{mode:v(d),opened:v(n),"onUpdate:opened":t[2]||(t[2]=m=>G(n)?n.value=m:null),processor:v(l)},null,8,["mode","opened","processor"])])}}}),wt=Object.freeze(Object.defineProperty({__proto__:null,default:ht},Symbol.toStringTag,{value:"Module"}));export{He as _,Be as d,Ne as e,wt as p,X as u};
