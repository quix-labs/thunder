import{p as F,q as w,_ as B,g as k,x as I,y as C,f as v,D as A,L as H,G as c,o as b,H as h,w as o,b as n,K as _,a as g,I as f,J as S,ak as G,aP as P,U as L,O as N,N as d,t as O,d as R,aQ as j,aM as q,W as M}from"./CD5hUaAV.js";import{_ as z,a as Y}from"./DEi0poqG.js";import{_ as E}from"./B9rY3amy.js";import{Y as J,G as K,S as Q,v as W,x as X,_ as Z}from"./CuAb3WZH.js";const x={wrapper:"relative z-50",inner:"fixed inset-0 overflow-y-auto",container:"flex min-h-full items-end sm:items-center justify-center text-center",padding:"p-4 sm:p-0",margin:"sm:my-8",base:"relative text-left rtl:text-right flex flex-col",overlay:{base:"fixed inset-0 transition-opacity",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"}},background:"bg-white dark:bg-gray-900",ring:"",rounded:"rounded-lg",shadow:"shadow-xl",width:"w-full sm:max-w-lg",height:"",fullscreen:"w-screen h-screen",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"}},ee=F(w.ui.strategy,w.ui.modal,x),ae=k({components:{HDialog:J,HDialogPanel:K,TransitionRoot:Q,TransitionChild:W},inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},appear:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},preventClose:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close","close-prevented","after-leave"],setup(e,{emit:s}){const{ui:i,attrs:t}=I("modal",C(e,"ui"),ee,C(e,"class")),u=v({get(){return e.modelValue},set(l){s("update:modelValue",l)}}),p=v(()=>e.transition?{...i.value.transition}:{});function r(l){if(e.preventClose){s("close-prevented");return}u.value=l,s("close")}const a=()=>{s("after-leave")};return A(()=>H()),{ui:i,attrs:t,isOpen:u,transitionClass:p,onAfterLeave:a,close:r}}});function oe(e,s,i,t,u,p){const r=c("TransitionChild"),a=c("HDialogPanel"),l=c("HDialog"),m=c("TransitionRoot");return b(),h(m,{appear:e.appear,show:e.isOpen,as:"template",onAfterLeave:e.onAfterLeave},{default:o(()=>[n(l,_({class:e.ui.wrapper},e.attrs,{onClose:e.close}),{default:o(()=>[e.overlay?(b(),h(r,_({key:0,as:"template",appear:e.appear},e.ui.overlay.transition,{class:e.ui.overlay.transition.enterFrom}),{default:o(()=>[g("div",{class:f([e.ui.overlay.base,e.ui.overlay.background])},null,2)]),_:1},16,["appear","class"])):S("",!0),g("div",{class:f(e.ui.inner)},[g("div",{class:f([e.ui.container,!e.fullscreen&&e.ui.padding])},[n(r,_({as:"template",appear:e.appear},e.transitionClass,{class:e.transitionClass.enterFrom}),{default:o(()=>[n(a,{class:f([e.ui.base,e.ui.background,e.ui.ring,e.ui.shadow,e.fullscreen?e.ui.fullscreen:[e.ui.width,e.ui.height,e.ui.rounded,e.ui.margin]])},{default:o(()=>[G(e.$slots,"default")]),_:3},8,["class"])]),_:3},16,["appear","class"])],2)],2)]),_:3},16,["class","onClose"])]),_:3},8,["appear","show","onAfterLeave"])}const te=B(ae,[["render",oe]]),ne={class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"},ue=k({__name:"DownloadProcessor",props:{processorId:{}},setup(e){const s=e,i=P("modal"),t=L({format:"csv",filename:null}),u=v(()=>`processor-${s.processorId}.${t.format}`),p=async()=>{var a;const r=t.filename||u.value;await j(X(`/processors/${s.processorId}/download?format=${t.format}&filename=${r}`),{external:!0,open:{target:"_self"}}),(a=i.value)==null||a.close()};return(r,a)=>{const l=q,m=z,T=E,V=M,U=Z,$=Y,D=te;return b(),h(D,{ref_key:"modal",ref:i},{default:o(()=>[n($,{onSubmit:N(p,["prevent"]),state:d(t),method:"GET",target:"_blank"},{default:o(()=>[n(U,{ui:{body:{base:"grid gap-y-4"},footer:{padding:""}}},{header:o(()=>[g("p",ne," Download data for processor nÂ°"+O(r.processorId),1)]),footer:o(()=>[n(V,{type:"submit",class:"p-3 rounded-t-none",block:""},{default:o(()=>a[2]||(a[2]=[R(" Download")])),_:1})]),default:o(()=>[n(m,{label:"Format",name:"format",required:""},{default:o(()=>[n(l,{modelValue:d(t).format,"onUpdate:modelValue":a[0]||(a[0]=y=>d(t).format=y),options:["csv","json"],required:""},null,8,["modelValue"])]),_:1}),n(m,{label:"Filename",name:"filename"},{default:o(()=>[n(T,{placeholder:d(u),modelValue:d(t).filename,"onUpdate:modelValue":a[1]||(a[1]=y=>d(t).filename=y)},null,8,["placeholder","modelValue"])]),_:1})]),_:1})]),_:1},8,["state"])]),_:1},512)}}});export{ue as default};
