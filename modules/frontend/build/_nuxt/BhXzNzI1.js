import{h as y,r as L,o as d,c as i,b as u,w as l,O as s,W as B,a as m,P as D,d as p,F as E,Q as F,Z as I,L as N,t as O,p as U,f as V,$ as w,_ as $}from"./CpwuFn8I.js";import{_ as b,c as M}from"./DN-EXmkR.js";import{u as H,a as j,_ as A}from"./CLuyMiIO.js";import"./CeB_s2cw.js";const G=a=>(U("data-v-a8974149"),a=a(),V(),a),P={class:"flex gap-x-2 items-center justify-between"},Q=G(()=>m("h1",null,"Data Sources",-1)),R={class:"grid grid-cols-3"},W=["innerHTML"],Z=y({__name:"sources",setup(a){const o=L(!1),{data:k,refresh:f}=H(),{data:_}=j(),T=async v=>{var c;const{data:t,error:r,status:n}=await M(`/sources/${v}`,{method:"DELETE"});if(n.value==="error")w().add({color:"red",title:"Unable to delete source",description:(c=r.value)==null?void 0:c.message});else if(n.value==="success"){const e=t.value;w().add({color:"green",title:"Successfully deleted source",description:e.message})}await f()};return(v,t)=>{const r=I,n=b,c=A;return d(),i("section",null,[u(n,null,{header:l(()=>[m("div",P,[Q,u(r,{onClick:t[0]||(t[0]=D(e=>o.value=!s(o),["prevent"])),variant:"soft"},{default:l(()=>[p("+ Add Source")]),_:1})])]),default:l(()=>[m("div",R,[(d(!0),i(E,null,F(s(k)||[],(e,g)=>{var h,S,C,x;return d(),i("div",null,[s(_)&&((S=(h=s(_)[e.driver])==null?void 0:h.config)!=null&&S.image)?(d(),i("span",{key:0,innerHTML:(x=(C=s(_)[e.driver])==null?void 0:C.config)==null?void 0:x.image,class:"nested-svg"},null,8,W)):N("",!0),p(" Source nÂ°"+O(g)+" (TODO user defined name) ",1),u(r,{color:"red",icon:"i-heroicons-trash",onClick:D(q=>T(g),["prevent"])},{default:l(()=>[p(" Delete ")]),_:2},1032,["onClick"])])}),256))])]),_:1}),u(c,{opened:s(o),"onUpdate:opened":t[1]||(t[1]=e=>B(o)?o.value=e:null),onCreated:s(f)},null,8,["opened","onCreated"])])}}}),Y=$(Z,[["__scopeId","data-v-a8974149"]]);export{Y as default};
