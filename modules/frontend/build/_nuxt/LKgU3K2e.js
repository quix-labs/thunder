const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./DhHisbSL.js","./HiftkIsK.js","./DVwufSK3.js","./entry.DSrKHs56.css","./CqU4Nrnk.js","./useGoFetch.Cg6qBO-I.css","./Be938Yxi.js","./D4iWiQVf.js","./useSources.Be7ST0Az.css","./rkiI53QH.js","./useTargets.DHNXSrSi.css","./RightPanel.BuNwCrhp.css","./DPV2iiKa.js","./SamplePanel._o2deULb.css"])))=>i.map(i=>d[i]);
import{r as j,f as P,g as K,i as ue,h as ce,s as pe,j as me,k as ve,l as fe,m as Q,E as ge,A as ye,T as be,F as G,n as X,_ as Z,p as he,q,v as J,x as xe,y as ee,z as we,B as ke,C as F,D as _e,G as te,o as b,H as D,w,a as g,I as V,c as k,b as y,J as S,K as $e,L as Se,M as Ce,N as v,O as _,t as I,d as A,P as ae,Q as L,R as ne,S as Y,U as Pe,V as R,W as oe,X as se,Y as le,Z as M,$ as Ie}from"./DVwufSK3.js";import{f as ze,u as Te,_ as re,a as Ve,b as H,c as Ue,d as Me,e as De}from"./CqU4Nrnk.js";const Ee={base:"relative inline-flex flex-shrink-0 border-2 border-transparent disabled:cursor-not-allowed disabled:opacity-50 focus:outline-none",rounded:"rounded-full",ring:"focus-visible:ring-2 focus-visible:ring-{color}-500 dark:focus-visible:ring-{color}-400 focus-visible:ring-offset-2 focus-visible:ring-offset-white dark:focus-visible:ring-offset-gray-900",active:"bg-{color}-500 dark:bg-{color}-400",inactive:"bg-gray-200 dark:bg-gray-700",size:{"2xs":"h-3 w-5",xs:"h-3.5 w-6",sm:"h-4 w-7",md:"h-5 w-9",lg:"h-6 w-11",xl:"h-7 w-[3.25rem]","2xl":"h-8 w-[3.75rem]"},container:{base:"pointer-events-none relative inline-block rounded-full bg-white dark:bg-gray-900 shadow transform ring-0 transition ease-in-out duration-200",active:{"2xs":"translate-x-2 rtl:-translate-x-2",xs:"translate-x-2.5 rtl:-translate-x-2.5",sm:"translate-x-3 rtl:-translate-x-3",md:"translate-x-4 rtl:-translate-x-4",lg:"translate-x-5 rtl:-translate-x-5",xl:"translate-x-6 rtl:-translate-x-6","2xl":"translate-x-7 rtl:-translate-x-7"},inactive:"translate-x-0 rtl:-translate-x-0",size:{"2xs":"h-2 w-2",xs:"h-2.5 w-2.5",sm:"h-3 w-3",md:"h-4 w-4",lg:"h-5 w-5",xl:"h-6 w-6","2xl":"h-7 w-7"}},icon:{base:"absolute inset-0 h-full w-full flex items-center justify-center transition-opacity",active:"opacity-100 ease-in duration-200",inactive:"opacity-0 ease-out duration-100",size:{"2xs":"h-2 w-2",xs:"h-2 w-2",sm:"h-2 w-2",md:"h-3 w-3",lg:"h-4 w-4",xl:"h-5 w-5","2xl":"h-6 w-6"},on:"text-{color}-500 dark:text-{color}-400",off:"text-gray-400 dark:text-gray-500",loading:"animate-spin text-{color}-500 dark:text-{color}-400"},default:{onIcon:null,offIcon:null,loadingIcon:"i-heroicons-arrow-path-20-solid",color:"primary",size:"md"}};function Oe(e,n,t){let p=j(t==null?void 0:t.value),r=P(()=>e.value!==void 0);return[P(()=>r.value?e.value:p.value),function(s){return r.value||(p.value=s),n==null?void 0:n(s)}]}function Ae(e={},n=null,t=[]){for(let[p,r]of Object.entries(e))de(t,ie(n,p),r);return t}function ie(e,n){return e?e+"["+n+"]":n}function de(e,n,t){if(Array.isArray(t))for(let[p,r]of t.entries())de(e,ie(n,p.toString()),r);else t instanceof Date?e.push([n,t.toISOString()]):typeof t=="boolean"?e.push([n,t?"1":"0"]):typeof t=="string"?e.push([n,t]):typeof t=="number"?e.push([n,`${t}`]):t==null?e.push([n,""]):Ae(t,n,e)}function Be(e){var n,t;let p=(n=e==null?void 0:e.form)!=null?n:e.closest("form");if(p){for(let r of p.elements)if(r!==e&&(r.tagName==="INPUT"&&r.type==="submit"||r.tagName==="BUTTON"&&r.type==="submit"||r.nodeName==="INPUT"&&r.type==="image")){r.click();return}(t=p.requestSubmit)==null||t.call(p)}}let Ne=Symbol("GroupContext"),je=K({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:null},disabled:{type:Boolean,default:!1},tabIndex:{type:Number,default:0}},inheritAttrs:!1,setup(e,{emit:n,attrs:t,slots:p,expose:r}){var s;let a=(s=e.id)!=null?s:`headlessui-switch-${ue()}`,d=ce(Ne,null),[l,m]=Oe(P(()=>e.modelValue),o=>n("update:modelValue",o),P(()=>e.defaultChecked));function u(){m(!l.value)}let z=j(null),$=d===null?z:d.switchRef,C=pe(P(()=>({as:e.as,type:t.type})),$);r({el:$,$el:$});function T(o){o.preventDefault(),u()}function h(o){o.key===X.Space?(o.preventDefault(),u()):o.key===X.Enter&&Be(o.currentTarget)}function i(o){o.preventDefault()}let c=P(()=>{var o,x;return(x=(o=me($))==null?void 0:o.closest)==null?void 0:x.call(o,"form")});return ve(()=>{fe([c],()=>{if(!c.value||e.defaultChecked===void 0)return;function o(){m(e.defaultChecked)}return c.value.addEventListener("reset",o),()=>{var x;(x=c.value)==null||x.removeEventListener("reset",o)}},{immediate:!0})}),()=>{let{name:o,value:x,form:U,tabIndex:E,...B}=e,f={checked:l.value},N={id:a,ref:$,role:"switch",type:C.value,tabIndex:E===-1?0:E,"aria-checked":l.value,"aria-labelledby":d==null?void 0:d.labelledby.value,"aria-describedby":d==null?void 0:d.describedby.value,onClick:T,onKeyup:h,onKeypress:i};return Q(G,[o!=null&&l.value!=null?Q(ze,ge({features:Te.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:l.value,form:U,disabled:B.disabled,name:o,value:x})):null,ye({ourProps:N,theirProps:{...t,...be(B,["modelValue","defaultChecked"])},slot:f,attrs:t,slots:p,name:"Switch"})])}}});const O=he(q.ui.strategy,q.ui.toggle,Ee),Le=K({components:{HSwitch:je,UIcon:J},inheritAttrs:!1,props:{id:{type:String,default:null},name:{type:String,default:null},modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},onIcon:{type:String,default:()=>O.default.onIcon},offIcon:{type:String,default:()=>O.default.offIcon},loadingIcon:{type:String,default:()=>O.default.loadingIcon},color:{type:String,default:()=>O.default.color,validator(e){return q.ui.colors.includes(e)}},size:{type:String,default:()=>O.default.size,validator(e){return Object.keys(O.size).includes(e)}},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","change"],setup(e,{emit:n}){const{ui:t,attrs:p}=xe("toggle",ee(e,"ui"),O),{emitFormChange:r,color:s,inputId:a,name:d}=we(e),l=P({get(){return e.modelValue},set(T){n("update:modelValue",T),n("change",T),r()}}),m=P(()=>ke(F(t.value.base,t.value.size[e.size],t.value.rounded,s.value&&t.value.ring.replaceAll("{color}",s.value),s.value&&(l.value?t.value.active:t.value.inactive).replaceAll("{color}",s.value)),e.class)),u=P(()=>F(t.value.container.base,t.value.container.size[e.size],l.value?t.value.container.active[e.size]:t.value.container.inactive)),z=P(()=>F(t.value.icon.size[e.size],s.value&&t.value.icon.on.replaceAll("{color}",s.value))),$=P(()=>F(t.value.icon.size[e.size],s.value&&t.value.icon.off.replaceAll("{color}",s.value))),C=P(()=>F(t.value.icon.size[e.size],s.value&&t.value.icon.loading.replaceAll("{color}",s.value)));return _e(()=>Se()),{ui:t,attrs:p,name:d,inputId:a,active:l,switchClass:m,containerClass:u,onIconClass:z,offIconClass:$,loadingIconClass:C}}});function Ke(e,n,t,p,r,s){const a=J,d=te("HSwitch");return b(),D(d,$e({id:e.inputId,modelValue:e.active,"onUpdate:modelValue":n[0]||(n[0]=l=>e.active=l),name:e.name,disabled:e.disabled||e.loading,class:e.switchClass},e.attrs),{default:w(()=>[g("span",{class:V(e.containerClass)},[e.loading?(b(),k("span",{key:0,class:V([e.ui.icon.active,e.ui.icon.base]),"aria-hidden":"true"},[y(a,{name:e.loadingIcon,class:V(e.loadingIconClass)},null,8,["name","class"])],2)):S("",!0),!e.loading&&e.onIcon?(b(),k("span",{key:1,class:V([e.active?e.ui.icon.active:e.ui.icon.inactive,e.ui.icon.base]),"aria-hidden":"true"},[y(a,{name:e.onIcon,class:V(e.onIconClass)},null,8,["name","class"])],2)):S("",!0),!e.loading&&e.offIcon?(b(),k("span",{key:2,class:V([e.active?e.ui.icon.inactive:e.ui.icon.active,e.ui.icon.base]),"aria-hidden":"true"},[y(a,{name:e.offIcon,class:V(e.offIconClass)},null,8,["name","class"])],2)):S("",!0)],2)]),_:1},16,["id","modelValue","name","disabled","class"])}const Fe=Z(Le,[["render",Ke]]);function W(){return Ce("process-form",()=>ee({activeTabs:"source",preventScroll:!1,shortMode:!1,liveReload:!0,showSamplePanel:!0}))}const Re={key:2,class:"italic opacity-60"},He={key:3},qe={key:0,class:"text-gray-400 ml-2"},Ge=["onKeydown","onClick"],Je={key:0,class:"italic text-sm"},We={key:1},Qe={key:1,class:"inline-flex items-baseline relative"},Xe=K({__name:"MappingThree",props:{mapping:{default:()=>[]},name:{},as:{},path:{}},setup(e){const n=j(!1),t=W(),p=async a=>{t.value.activeTabs="mapping",t.value.activeMappingPath=r(a)},r=a=>[e.path,a].filter(d=>d).join("."),s=a=>{var d;return((d=t.value.activeMappingPath)==null?void 0:d.startsWith(r(a)+"."))||t.value.activeMappingPath===r(a)||r(a)===""};return(a,d)=>{const l=J,m=te("MappingThree",!0);return b(),k("div",{tabindex:"0",class:V(["text-sm leading-tight",{"font-bold":r("")===(v(t).activeMappingPath||"")}]),onClick:d[3]||(d[3]=_(u=>p(""),["prevent","stop"])),onKeydown:d[4]||(d[4]=L(_(u=>p(""),["prevent","stop"]),["enter","space"]))},[g("div",{class:V(["inline-flex items-baseline leading-normal relative w-full dark:hover:bg-white/5 hover:bg-primary/5",{underline:r("")===(v(t).activeMappingPath||"")}])},[a.path&&!v(n)?(b(),D(l,{key:0,class:"carret hover:text-sky-600",name:"i-heroicons-chevron-down",onClick:d[0]||(d[0]=_(u=>n.value=!0,["prevent","stop"]))})):a.path?(b(),D(l,{key:1,class:"carret hover:text-sky-600",name:"i-heroicons-chevron-right",onClick:d[1]||(d[1]=_(u=>n.value=!1,["prevent","stop"]))})):S("",!0),a.name&&a.name!==a.as?(b(),k("span",Re,I(a.name)+": ",1)):S("",!0),a.as?(b(),k("span",He,I(a.as)+" ",1)):S("",!0),g("p",{onClick:d[2]||(d[2]=_(u=>n.value=!v(n),["prevent","stop"])),class:"hover:text-sky-600"},[A(I(v(n)?"{...}":"{")+" ",1),v(n)?(b(),k("span",qe,I(a.mapping.length>=2?`// ${a.mapping.length} items`:`// ${a.mapping.length} item`),1)):S("",!0)])],2),v(n)?S("",!0):(b(!0),k(G,{key:0},ae(a.mapping,u=>(b(),k("div",{class:V(["pl-4 cursor-pointer dark:hover:bg-white/5 hover:bg-primary/5",{"border-l border-dashed":!0,"border-sky-600 dark:border-green-400/60":s(""),"border-[#bfcbd9]":!s("")}])},[u._type==="simple"?(b(),k("p",{key:0,class:V({"font-bold underline":r(u.column)===(v(t).activeMappingPath||"")}),onKeydown:L(_(z=>p(u.column),["prevent","stop"]),["enter","space"]),onClick:_(z=>p(u.column),["prevent","stop"]),tabindex:"0"},[u.name&&u.name!==u.column?(b(),k("span",Je,I(u.name)+": ",1)):S("",!0),u.column?(b(),k("span",We,I(u.column),1)):S("",!0)],42,Ge)):u._type==="relation"?(b(),D(m,{key:1,mapping:u.mapping,name:u.table,as:u.name,path:r(u.name)},null,8,["mapping","name","as","path"])):S("",!0)],2))),256)),v(n)?S("",!0):(b(),k("span",Qe,"}"))],34)}}}),Ye=Z(Xe,[["__scopeId","data-v-a6e5187f"]]),Ze={class:"flex flex-col flex-1 gap-y-4 max-h-screen overflow-auto p-4"},et={class:"font-semibold"},tt={class:"font-normal"},at={class:"font-semibold"},nt={class:"font-normal"},ot=K({__name:"LeftPanel",props:{form:{required:!0},formModifiers:{}},emits:["update:form"],setup(e){const n=ne(e,"form"),t=W();function p(r){t.value.activeTabs=r}return(r,s)=>{const a=re,d=Ye;return b(),k("div",Ze,[y(a,{tabindex:"0",class:"cursor-pointer",onClick:s[0]||(s[0]=_(l=>p("source"),["prevent"])),onKeydown:s[1]||(s[1]=L(l=>p("source"),["enter","space"])),ui:v(t).activeTabs==="source"?{ring:"ring-1 ring-primary dark:ring-primary"}:void 0},{header:w(()=>s[6]||(s[6]=[g("p",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"}," Source ",-1),g("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Describe which data will be synchronized ",-1)])),default:w(()=>{var l;return[g("p",null,"Source: Source n°"+I(n.value.source),1),g("p",null,"Table: "+I(n.value.table||"---"),1),g("p",null,"Conditions: "+I(((l=n.value.conditions)==null?void 0:l.length)||"---")+" TODO",1)]}),_:1},8,["ui"]),y(a,{tabindex:"0",class:"flex-1 cursor-pointer",onClick:s[2]||(s[2]=_(l=>p("mapping"),["prevent"])),onKeydown:s[3]||(s[3]=L(l=>p("mapping"),["enter","space"])),ui:v(t).activeTabs==="mapping"?{ring:"ring-1 ring-primary dark:ring-primary"}:void 0},{header:w(()=>s[7]||(s[7]=[g("p",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"}," Mapping ",-1),g("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Describe how to transform your relational data into unstructured documents ",-1)])),default:w(()=>[y(d,{mapping:n.value.mapping,name:n.value.table,as:n.value.index},null,8,["mapping","name","as"])]),_:1},8,["ui"]),y(a,{tabindex:"0",class:"cursor-pointer",onClick:s[4]||(s[4]=_(l=>p("output"),["prevent"])),onKeydown:s[5]||(s[5]=L(l=>p("output"),["enter","space"])),ui:v(t).activeTabs==="output"?{ring:"ring-1 ring-primary dark:ring-primary"}:void 0},{header:w(()=>s[8]||(s[8]=[g("p",{class:"text-base font-semibold leading-6 text-gray-900 dark:text-white"}," Output ",-1),g("p",{class:"mt-1 text-sm text-gray-500 dark:text-gray-400"}," Describe how your data will be synchronized ",-1)])),default:w(()=>{var l,m;return[g("p",et,[s[9]||(s[9]=A(" Targets: ")),g("span",tt,I((m=(l=n.value.targets)==null?void 0:l.map(u=>`Target n°${u}`))==null?void 0:m.join(", ")),1)]),g("p",at,[s[10]||(s[10]=A(" Expected index: ")),g("span",nt,I(n.value.index),1)])]}),_:1},8,["ui"])])}}}),st=oe(()=>se(()=>import("./DhHisbSL.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11]),import.meta.url).then(e=>e.default||e)),lt=oe(()=>se(()=>import("./DPV2iiKa.js"),__vite__mapDeps([12,2,3,4,5,13]),import.meta.url).then(e=>e.default||e)),rt={class:"flex flex-col flex-1 relative"},it={class:"col-span-full flex justify-between border-b p-4"},dt={class:"flex gap-x-4"},ut={key:0,class:"flex items-center gap-x-4 cursor-pointer"},ct={class:"flex items-center gap-x-4 cursor-pointer"},pt=K({__name:"Complete",props:Y({mode:{default:"create"},processor:{}},{opened:{},openedModifiers:{}}),emits:Y(["created","updated"],["update:opened"]),setup(e,{emit:n}){const t=ne(e,"opened"),p=n,r=W(),s=Pe({source:null,table:null,primary_keys:[],conditions:[],targets:[],index:null,mapping:[]}),a=P(()=>e.processor||s),d=async()=>{var l,m,u,z;if(e.mode==="create"){const{status:$,error:C,data:T}=await H("/processors",{method:"post",body:a,watch:!1});if($.value==="success"){const h=T.value;M().add({title:"Success",color:"green",description:h.message}),p("created"),t.value=!1;return}$.value==="error"&&M().add({title:"Error",description:(l=C.value)==null?void 0:l.message,color:"red"})}else if(e.mode==="edit"){const{status:$,error:C,data:T}=await H(`/processors/${e.processor.id}`,{method:"put",body:a,watch:!1});if($.value==="success"){const h=T.value;M().add({title:"Success",color:"green",description:h.message}),p("updated"),t.value=!1;return}$.value==="error"&&M().add({title:"Error",description:((u=(m=C==null?void 0:C.value)==null?void 0:m.data)==null?void 0:u.error)||((z=C.value)==null?void 0:z.message),color:"red"})}};return(l,m)=>{const u=Fe,z=ot,$=st,C=lt,T=le,h=Ve;return b(),k("section",rt,[y(h,{modelValue:t.value,"onUpdate:modelValue":m[5]||(m[5]=i=>t.value=i),class:"overflow-y-auto",onKeydown:L(_(d,["ctrl","prevent"]),["enter"]),ui:v(r).showSamplePanel?l.mode==="read"?{width:"w-screen max-w-[40vw]"}:{width:"w-screen max-w-[70vw]"}:l.mode==="read"?{width:"w-screen max-w-[25vw]"}:{width:"w-screen max-w-[55vw]"}},{default:w(()=>{var i,c;return[g("div",{class:V(["grid min-h-screen grid-rows-[auto_1fr_auto]",{"grid-cols-[2fr_3fr]":l.mode!=="read"&&!v(r).showSamplePanel,"grid-cols-[2fr_3fr_15vw]":l.mode!=="read"&&v(r).showSamplePanel,"grid-cols-[1fr_15vw]":v(r).showSamplePanel&&l.mode=="read"}])},[g("div",it,[g("h2",{onClick:_(d,["prevent"]),class:"col-span-full text-center text-2xl font-semibold"},I({create:"New processor",edit:`Edit processor: ${(i=l.processor)==null?void 0:i.id}`,read:`Processor: ${(c=l.processor)==null?void 0:c.id}`}[l.mode]),1),g("div",dt,[l.mode!=="read"?(b(),k("label",ut,[m[6]||(m[6]=A(" Short Mode (beta): ")),y(u,{"on-icon":"i-heroicons-check-20-solid","off-icon":"i-heroicons-x-mark-20-solid",modelValue:v(r).shortMode,"onUpdate:modelValue":m[0]||(m[0]=o=>v(r).shortMode=o)},null,8,["modelValue"])])):S("",!0),g("label",ct,[m[7]||(m[7]=A(" Sample Tab: ")),y(u,{"on-icon":"i-heroicons-check-20-solid","off-icon":"i-heroicons-x-mark-20-solid",modelValue:v(r).showSamplePanel,"onUpdate:modelValue":m[1]||(m[1]=o=>v(r).showSamplePanel=o)},null,8,["modelValue"])])])]),y(z,{form:v(a),"onUpdate:form":m[2]||(m[2]=o=>R(a)?a.value=o:null)},null,8,["form"]),l.mode!=="read"?(b(),D($,{key:0,form:v(a),"onUpdate:form":m[3]||(m[3]=o=>R(a)?a.value=o:null)},null,8,["form"])):S("",!0),v(r).showSamplePanel?(b(),D(C,{key:1,form:v(a),"onUpdate:form":m[4]||(m[4]=o=>R(a)?a.value=o:null)},null,8,["form"])):S("",!0),l.mode!=="read"?(b(),D(T,{key:2,class:"col-span-full",onClick:_(d,["prevent"]),size:"xl",block:"",ui:{rounded:""}},{default:w(()=>[A(I({create:"Create",edit:"Save changes"}[l.mode]),1)]),_:1})):S("",!0)],2)]}),_:1},8,["modelValue","onKeydown","ui"])])}}}),mt={class:"flex gap-1"},vt={class:"flex gap-1"},ft={class:"flex gap-1"},gt={class:"flex gap-1"},yt=K({__name:"processors",setup(e){const{status:n,data:t}=Ie(),p=[{key:"id",label:"#",sortable:!0,rowClass:"w-[1px] whitespace-nowrap"},{key:"source",label:"Source",sortable:!0},{key:"index",label:"Index",sortable:!0},{key:"targets",label:"Targets",sortable:!1},{key:"stats",label:"Stats",sortable:!1},{key:"listening",label:"Listening",sortable:!1},{key:"indexing",label:"Indexing",sortable:!1},{key:"actions",sortable:!1,rowClass:"w-[1px] whitespace-nowrap"}],r=P(()=>{var h;return((h=t.value)==null?void 0:h.map(i=>{var c;return{id:i.id,targets:i.targets,index:i.index||"---",source:i.source!==void 0?i.source:"---",stats:{conditions:((c=i.conditions)==null?void 0:c.length)||0,...s(i.mapping||[])},indexing:i.indexing||!1,listening:i.listening||!1}}))||[]}),s=h=>{const i=h.filter(o=>o._type==="relation"),c={total:h.length,relations:i.length};return h.filter(o=>o._type==="relation").forEach(o=>{const{total:x,relations:U}=s(o.mapping||[]);c.total+=x,c.relations+=U}),c},a=j(!1),d=j("create"),l=j(),m=async()=>{d.value="create",l.value=void 0,a.value=!0},u=async h=>{var i,c;d.value="read",l.value=(c=(i=t.value)==null?void 0:i.filter(o=>o.id===h))==null?void 0:c.at(0),a.value=!0},z=async h=>{var i,c;d.value="edit",l.value=(c=(i=t.value)==null?void 0:i.filter(o=>o.id===h))==null?void 0:c.at(0),a.value=!0},$=async h=>{var i,c;d.value="create",l.value={...(c=(i=t.value)==null?void 0:i.filter(o=>o.id===h))==null?void 0:c.at(0)},a.value=!0},C=async h=>{var x;const{data:i,error:c,status:o}=await H(`/processors/${h}`,{method:"DELETE"});if(o.value==="error")M().add({color:"red",title:"Unable to delete processor",description:(x=c.value)==null?void 0:x.message});else if(o.value==="success"){const U=i.value;M().add({color:"green",title:"Successfully deleted processor",description:U.message})}},T=h=>{H(`/processors/${h}/index`,{method:"POST"}).then(({data:i,error:c,status:o})=>{var x,U,E;if(o.value==="error")M().add({color:"red",title:"Unable to indexing",description:((U=(x=c.value)==null?void 0:x.data)==null?void 0:U.error)||((E=c.value)==null?void 0:E.message)});else if(o.value==="success"){const B=i.value;M().add({color:"green",title:"Successfully indexed",description:B.message})}})};return(h,i)=>{const c=le,o=Ue,x=Me,U=De,E=re,B=pt;return b(),k("section",null,[y(E,{class:"w-full",ui:{divide:"divide-y divide-gray-200 dark:divide-gray-700",body:{padding:""},header:{base:"flex gap-x-2 justify-between items-center"},footer:{base:"text-sm leading-5 text-center"}}},{header:w(()=>[i[4]||(i[4]=g("h1",{class:"font-semibold text-xl text-gray-900 dark:text-white leading-tight"},"Processors",-1)),y(c,{onClick:_(m,["prevent"]),variant:"soft"},{default:w(()=>i[3]||(i[3]=[A("+ Add Processor")])),_:1})]),default:w(()=>[y(U,{onSelect:i[1]||(i[1]=f=>u(f.id)),columns:p,rows:v(r),sort:{column:"id",direction:"desc"},loading:v(n)==="pending"||v(n)==="idle"},{"actions-data":w(({row:f})=>[g("div",mt,[y(o,{items:[[{label:"Replicate",click:()=>$(f.id)},{label:"Claim indexing",click:()=>T(f.id),disabled:f.status==="indexing"}]],onClick:i[0]||(i[0]=_(()=>{},["stop"]))},{default:w(()=>[y(c,{icon:"i-heroicons-ellipsis-horizontal",variant:"link",color:"gray",size:"xl",padded:!1})]),_:2},1032,["items"]),y(c,{icon:"i-heroicons-eye",variant:"link",color:"gray",size:"xl",padded:!1,onClick:_(N=>u(f.id),["stop","prevent"])},null,8,["onClick"]),y(c,{icon:"i-heroicons-pencil-square",variant:"link",color:"gray",size:"xl",padded:!1,onClick:_(N=>z(f.id),["stop","prevent"])},null,8,["onClick"]),y(c,{icon:"i-heroicons-trash",variant:"link",color:"red",size:"xl",padded:!1,onClick:_(N=>C(f.id),["stop","prevent"])},null,8,["onClick"])])]),"targets-data":w(({row:f})=>[g("div",vt,[(b(!0),k(G,null,ae(f.targets,N=>(b(),D(x,{size:"xs",label:`Target n°${N}`,color:"sky",variant:"subtle"},null,8,["label"]))),256))])]),"source-data":w(({row:f})=>[g("div",ft,[y(x,{size:"xs",label:`Source n°${f.source}`,color:"sky",variant:"subtle"},null,8,["label"])])]),"stats-data":w(({row:f})=>[g("div",gt,[y(x,{size:"xs",label:`${f.stats.total} fields`,color:"gray"},null,8,["label"]),y(x,{size:"xs",label:`${f.stats.relations} relations`,color:"gray"},null,8,["label"]),y(x,{size:"xs",label:`${f.stats.conditions} conditions`,color:"gray"},null,8,["label"])])]),"indexing-data":w(({row:f})=>[y(x,{size:"xs",label:f.indexing?"Indexing":"Not indexing",color:f.indexing?"green":"red"},null,8,["label","color"])]),"listening-data":w(({row:f})=>[y(x,{size:"xs",label:f.listening?"Listening":"Not listening",color:f.listening?"green":"red"},null,8,["label","color"])]),_:1},8,["rows","loading"])]),footer:w(()=>{var f;return[i[5]||(i[5]=g("span",{class:"font-medium"},"Total: ",-1)),g("span",null,I(((f=v(r))==null?void 0:f.length)||0)+" processors",1)]}),_:1}),y(B,{mode:v(d),opened:v(a),"onUpdate:opened":i[2]||(i[2]=f=>R(a)?a.value=f:null),processor:v(l)},null,8,["mode","opened","processor"])])}}}),xt=Object.freeze(Object.defineProperty({__proto__:null,default:yt},Symbol.toStringTag,{value:"Module"}));export{Fe as _,Oe as d,Ae as e,xt as p,W as u};
